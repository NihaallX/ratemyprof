(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[121],{5517:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/add",function(){return s(6332)}])},2761:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(3759).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},2089:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(3759).Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},185:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(3759).Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},4270:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(3759).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8267:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(3759).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},6332:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var r=s(5893),a=s(7294),l=s(1163),i=s(9008),n=s.n(i),o=s(1664),d=s.n(o),c=s(837),u=s(2761),m=s(4270),h=s(3765),g=s(8267),p=s(185),x=s(2089),f=s(5871);let b=(e,t)=>{let s=e.length>t.length?e:t,r=e.length>t.length?t:e;if(0===s.length)return 1;let a=y(s,r);return(s.length-a)/s.length},y=(e,t)=>{let s=[];for(let e=0;e<=t.length;e++)s[e]=[e];for(let t=0;t<=e.length;t++)s[0][t]=t;for(let r=1;r<=t.length;r++)for(let a=1;a<=e.length;a++)t.charAt(r-1)===e.charAt(a-1)?s[r][a]=s[r-1][a-1]:s[r][a]=Math.min(s[r-1][a-1]+1,s[r][a-1]+1,s[r-1][a]+1);return s[t.length][e.length]};function j(){let e=(0,l.useRouter)(),{user:t,session:s,loading:i}=(0,c.a)(),[o,y]=(0,a.useState)({name:"",college_id:"",department:"",subjects:"",bio:""}),[j,v]=(0,a.useState)([]),[N,w]=(0,a.useState)(!1),[k,_]=(0,a.useState)(null),[P,M]=(0,a.useState)({});(0,a.useEffect)(()=>{S()},[]);let S=async()=>{try{let e=await fetch(`${f.CT}/colleges`);if(e.ok){let t=await e.json();v(t)}}catch(e){console.error("Failed to fetch colleges:",e)}},C=()=>{let e={};return o.name.trim()||(e.name="Professor name is required"),o.college_id||(e.college_id="Please select a college"),o.department.trim()||(e.department="Department is required"),M(e),0===Object.keys(e).length},Z=async r=>{if(r.preventDefault(),C()){if(!t){_({message:"Please log in to add a professor",type:"error"});return}w(!0);try{let t=s?.access_token;if(!t){_({message:"Authentication token not found. Please log in again.",type:"error"}),w(!1);return}let r=await fetch(`${f.CT}/professors/search?q=${encodeURIComponent(o.name)}&college_id=${o.college_id}`);if(r.ok){let e=await r.json();if(e.professors&&e.professors.length>0){let t=e.professors.filter(e=>b(o.name.toLowerCase(),e.name.toLowerCase())>.8);if(t.length>0){let e=t.map(e=>e.name).join(", ");if(!confirm(`⚠️ Potential duplicate found!

Similar professors already exist:
${e}

Are you sure you want to submit this as a new professor?`)){w(!1);return}}}}let a=await fetch(`${f.CT}/professors`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({...o,subjects:o.subjects?o.subjects.split(",").map(e=>e.trim()).filter(e=>e):[]})});if(a.ok)_({message:"Professor submitted successfully! It will be reviewed by our team before being published.",type:"success"}),alert("✅ Professor submitted successfully!\n\nYour submission will be reviewed by our team before being published. Thank you for contributing!"),y({name:"",college_id:"",department:"",subjects:"",bio:""}),setTimeout(()=>{e.push("/")},3e3);else{let e=await a.json(),t=e.detail||e.error||"Failed to submit professor. Please try again.";_({message:t,type:"error"}),409===a.status?alert("⚠️ Professor Already Exists\n\nThis professor already exists in this college. Please search for them instead of creating a duplicate entry."):500===a.status&&alert("❌ Server Error\n\n"+t+"\n\nPlease try again or contact support if the problem persists.")}}catch(t){console.error("Network error:",t);let e="Network error. Please check your connection and try again.";_({message:e,type:"error"}),alert("❌ "+e)}finally{w(!1)}}},A=e=>{let{name:t,value:s}=e.target;y(e=>({...e,[t]:s})),P[t]&&M(e=>({...e,[t]:""}))};return i?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n(),{children:(0,r.jsx)("title",{children:"Add Professor - RateMyProf India"})}),(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("div",{className:"bg-white shadow-sm",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)(d(),{href:"/",children:(0,r.jsxs)("button",{className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors",children:[(0,r.jsx)(u.Z,{className:"w-5 h-5 mr-2"}),"Back to Home"]})})})})}),(0,r.jsx)("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,r.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center mb-2",children:[(0,r.jsx)(m.Z,{className:"w-6 h-6 text-indigo-600 mr-2"}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Add a Professor"})]}),(0,r.jsx)("p",{className:"text-gray-600",children:"Help expand our database by adding a professor who isn't listed yet. All submissions are reviewed before being published."})]}),k&&(0,r.jsx)("div",{className:`mx-6 mt-4 p-4 rounded-lg ${"success"===k.type?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(h.Z,{className:"w-5 h-5 mr-2"}),k.message]})}),(0,r.jsxs)("form",{onSubmit:Z,className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Professor Name *"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(g.Z,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),(0,r.jsx)("input",{type:"text",name:"name",value:o.name,onChange:A,className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${P.name?"border-red-500":"border-gray-300"}`,placeholder:"Dr. Jane Smith"})]}),P.name&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:P.name})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"College *"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(p.Z,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),(0,r.jsxs)("select",{name:"college_id",value:o.college_id,onChange:A,className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${P.college_id?"border-red-500":"border-gray-300"}`,children:[(0,r.jsx)("option",{value:"",children:"Select a college"}),j.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),P.college_id&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:P.college_id})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department *"}),(0,r.jsx)("input",{type:"text",name:"department",value:o.department,onChange:A,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${P.department?"border-red-500":"border-gray-300"}`,placeholder:"Computer Science"}),P.department&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:P.department})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subjects Taught (Optional)"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(x.Z,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),(0,r.jsx)("input",{type:"text",name:"subjects",value:o.subjects,onChange:A,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Data Structures, Algorithms, Machine Learning"})]}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Separate multiple subjects with commas"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio (Optional)"}),(0,r.jsx)("textarea",{name:"bio",value:o.bio,onChange:A,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Brief description about the professor's background, specializations, etc."})]}),(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"Submission Guidelines"}),(0,r.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,r.jsx)("li",{children:"• Ensure the professor is not already listed on our platform"}),(0,r.jsx)("li",{children:"• Provide accurate and complete information"}),(0,r.jsx)("li",{children:"• All submissions will be verified before publication"}),(0,r.jsx)("li",{children:"• You'll be notified once your submission is reviewed"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)(d(),{href:"/",children:(0,r.jsx)("button",{type:"button",className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"})}),(0,r.jsx)("button",{type:"submit",disabled:N,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:N?"Submitting...":"Submit for Review"})]})]})]})})]})]})}},9008:function(e,t,s){e.exports=s(3867)}},function(e){e.O(0,[664,888,774,179],function(){return e(e.s=5517)}),_N_E=e.O()}]);