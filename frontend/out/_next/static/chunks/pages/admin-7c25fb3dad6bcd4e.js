(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{577:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return t(2856)}])},2761:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},3832:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]])},5928:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},4795:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]])},641:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2126:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},6691:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},5452:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},3416:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},9683:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z",key:"s6e0r"}]])},2099:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]])},9176:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},3:function(e,s,t){"use strict";t.d(s,{Z:function(){return m}});var a=t(5893),r=t(7294),l=t(2190),i=t(3416),n=t(6691),o=t(2126),d=t(3832),c=t(5928),x=t(641);function m({isOpen:e,onClose:s,onLogin:t}){let[m,g]=(0,r.useState)(""),[h,p]=(0,r.useState)(""),[u,f]=(0,r.useState)(!1),[b,y]=(0,r.useState)(!1),[j,v]=(0,r.useState)(null),N=async e=>{e.preventDefault(),y(!0),v(null);try{let e=await t(m,h);e.success?(s(),g(""),p("")):v(e.error||"Login failed")}catch(e){v("An unexpected error occurred")}finally{y(!1)}};return e?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full p-6 relative",children:[(0,a.jsx)("button",{onClick:s,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:(0,a.jsx)(l.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mx-auto mb-4",children:(0,a.jsx)(i.Z,{className:"w-8 h-8 text-blue-600"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Admin Login"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Access the RateMyProf admin panel"})]}),j&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,a.jsx)("p",{className:"text-red-600 text-sm",children:j})}),(0,a.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(n.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)("input",{id:"email",type:"email",value:m,onChange:e=>g(e.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"admin@gmail.com",required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(o.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)("input",{id:"password",type:u?"text":"password",value:h,onChange:e=>p(e.target.value),className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter admin password",required:!0}),(0,a.jsx)("button",{type:"button",onClick:()=>f(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:u?(0,a.jsx)(d.Z,{className:"w-4 h-4"}):(0,a.jsx)(c.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsx)("button",{type:"submit",disabled:b,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:b?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.Z,{className:"animate-spin w-4 h-4 mr-2"}),"Signing in..."]}):"Sign In as Admin"})]}),(0,a.jsx)("div",{className:"mt-4 text-center",children:(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Only authorized administrators can access this panel"})})]})}):null}},2856:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return w}});var a=t(5893),r=t(7294),l=t(9008),i=t.n(l),n=t(1163),o=t(837),d=t(8844),c=t(3416),x=t(2761),m=t(4795);let g=(0,t(3759).Z)("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]);var h=t(9176),p=t(5452),u=t(2099),f=t(9683),b=t(1664),y=t.n(b),j=t(3),v=t(4209),N=t(5871),w=()=>{let e;let s=(0,n.useRouter)(),{user:t,session:l,loading:b,signIn:w}=(0,o.a)(),{showToast:k,showConfirm:_}=(0,d.l)(),[S,C]=(0,r.useState)(!1),[A,F]=(0,r.useState)(!0),[$,R]=(0,r.useState)(!1),[D,P]=(0,r.useState)({flaggedReviews:0,pendingProfessors:0,totalUsers:0,totalProfessors:0,pendingApproval:0}),[Z,L]=(0,r.useState)([]),[T,M]=(0,r.useState)([]),[U,O]=(0,r.useState)([]),[E,B]=(0,r.useState)([]),[z,I]=(0,r.useState)([]),[V,J]=(0,r.useState)("dashboard"),[H,W]=(0,r.useState)(!1),[q,Y]=(0,r.useState)(!1),[G,Q]=(0,r.useState)(!1),[X,K]=(0,r.useState)(null),[ee,es]=(0,r.useState)(!1),[et,ea]=(0,r.useState)(null),[er,el]=(0,r.useState)(""),[ei,en]=(0,r.useState)(""),[eo,ed]=(0,r.useState)("reviews"),[ec,ex]=(0,r.useState)(!1),[em,eg]=(0,r.useState)(!1),[eh,ep]=(0,r.useState)(!1),[eu,ef]=(0,r.useState)(1),[eb,ey]=(0,r.useState)(0),[ej,ev]=(0,r.useState)([]),[eN,ew]=(0,r.useState)({total_reviews:0,pending_reviews:0,approved_reviews:0,removed_reviews:0,flagged_reviews:0,total_flags:0}),[ek,e_]=(0,r.useState)("pending"),[eS,eC]=(0,r.useState)(!1),[eA,eF]=(0,r.useState)([]),[e$,eR]=(0,r.useState)([]),[eD,eP]=(0,r.useState)({pending_college_review_flags:0,total_college_review_flags:0,flagged_college_reviews:0,total_college_reviews:0}),[eZ,eL]=(0,r.useState)("pending"),[eT,eM]=(0,r.useState)(!1),eU=()=>{W(!0),setTimeout(()=>W(!1),4e3)},eO=async(e,s)=>{try{let{error:t}=await w(e,s);if(t)return{success:!1,error:t.message};if(!("admin@gmail.com"===e||e.endsWith("@ratemyprof.in")))return{success:!1,error:"Access denied. Admin credentials required."};return Y(!1),{success:!0}}catch(e){return{success:!1,error:"Login failed. Please try again."}}},eE=async()=>{try{console.log("Loading admin dashboard stats (lightweight)...");let e=null,s=localStorage.getItem("adminSession");if(s)try{e=JSON.parse(s).access_token,console.log("Using stored admin session token")}catch(e){console.log("Failed to parse stored session")}if(!e)try{let s=await fetch(`${N.Sg}/api/moderation/admin/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:"admin@gmail.com",password:"gauravnihal123"})});if(s.ok){let t=await s.json();e=t.access_token,localStorage.setItem("adminSession",JSON.stringify(t)),console.log("Admin login successful, got token")}else console.log("Admin login failed")}catch(e){console.log("Admin login error:",e)}console.log("Admin token available:",!!e);let t=e?{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}:{"Content-Type":"application/json"};if(e)try{let e=await fetch(`${N.Sg}/api/moderation/dashboard/stats`,{headers:t});if(e.ok){let s=await e.json();P({totalProfessors:s.total_professors||0,pendingProfessors:s.professors_with_no_reviews||0,flaggedReviews:s.flagged_reviews_count||0,pendingApproval:s.pending_professors||0,totalUsers:s.total_users||0}),L(s.recent_flagged_reviews||[]),I(s.recent_pending_professors||[]),O(s.recent_users||[]),F(!1);return}}catch(e){console.log("Optimized stats endpoint not available, falling back to old method:",e)}let a=await fetch(`${N.Sg}/api/professors?limit=200&offset=0`,{headers:t}),r=[];if(a.ok){let e=await a.json();r=Array.isArray(e.professors)?e.professors:[]}let l=[],i=[],n=[];if(e)try{let e=await fetch(`${N.Sg}/api/moderation/reviews`,{headers:t});if(e.ok){let s=await e.json();l=Array.isArray(s.flagged_reviews)?s.flagged_reviews:[],L(l)}let s=await fetch(`${N.Sg}/api/moderation/users`,{headers:t});if(console.log("Users response status:",s.status),s.ok){let e=await s.json();console.log("Raw users data:",e),i=Array.isArray(e)?e:[],console.log("Processed users array:",i,"Length:",i.length),O(i)}else console.log("Users response not ok:",await s.text());let a=await fetch(`${N.Sg}/api/moderation/professors/pending`,{headers:t});if(a.ok){let e=await a.json();n=Array.isArray(e.professors)?e.professors:[],I(n)}}catch(e){console.log("Admin endpoints not available yet:",e)}let o=r.filter(e=>0===e.total_reviews),d=l.length,c=n.length,x=r.length;try{let e=await fetch(`${N.Sg}/api/professors?limit=1`,{headers:t});e.ok&&(x=(await e.json()).total||r.length)}catch(e){console.log("Could not fetch total professors count")}P({flaggedReviews:d,pendingProfessors:o.length,totalUsers:i.length||0,totalProfessors:x,pendingApproval:c}),M(o),console.log("Dashboard stats loaded:",{totalProfessors:x,flaggedReviews:d,pendingProfessors:o.length,pendingApproval:c,registeredUsers:i.length})}catch(e){console.error("Error loading real-time stats:",e),P(e=>({...e,flaggedReviews:0,pendingProfessors:0,totalUsers:0,totalProfessors:0,pendingApproval:0}))}};(0,r.useEffect)(()=>{console.log("Admin page loading..."),(async()=>{try{await eE(),C(!0),F(!1),sessionStorage.getItem("adminWelcomeShown")||(eU(),sessionStorage.setItem("adminWelcomeShown","true"))}catch(e){console.log("Admin access check failed:",e),F(!1)}})()},[]),(0,r.useEffect)(()=>{if(S){let e=setInterval(()=>{console.log("Auto-refreshing admin data..."),eE()},3e5);return()=>clearInterval(e)}},[S]),(0,r.useEffect)(()=>{"all-professors"!==V||eh||eI()},[V]),(0,r.useEffect)(()=>{"users"===V&&U.length<=5&&ez()},[V]);let eB=()=>{console.log("Manual refresh triggered"),eE()},ez=async()=>{try{let e=localStorage.getItem("adminSession");if(!e){console.log("No admin token found");return}let s=JSON.parse(e),t={Authorization:`Bearer ${s.access_token}`,"Content-Type":"application/json"};console.log("Loading all users...");let a=await fetch(`${N.Sg}/api/moderation/users`,{headers:t});if(a.ok){let e=await a.json();console.log("All users loaded:",e.length),O(Array.isArray(e)?e:[])}else console.log("Failed to load users:",await a.text())}catch(e){console.error("Error loading all users:",e)}},eI=async()=>{if(!eh&&!em){eg(!0),console.log("Loading all professors...");try{let e=null,s=localStorage.getItem("adminSession");if(s)try{e=JSON.parse(s).access_token}catch(e){console.log("Failed to parse stored session")}let t=e?{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}:{"Content-Type":"application/json"},a=[],r=0,l=!0;for(;l;){let e=await fetch(`${N.Sg}/api/professors?limit=100&offset=${r}`,{headers:t});if(e.ok){let s=await e.json(),t=Array.isArray(s.professors)?s.professors:[];a.push(...t),l=s.has_more&&100===t.length,r+=100,B([...a]),console.log(`Loaded ${a.length} professors so far...`)}else l=!1}B(a),ep(!0),console.log(`Finished loading all ${a.length} professors`)}catch(e){console.error("Error loading all professors:",e)}finally{eg(!1)}}},eV=async(e,s)=>{try{(await fetch(`${N.Sg}/api/admin/reviews/${e}/${s}`,{method:"POST"})).ok&&await eE()}catch(e){console.error(`Failed to ${s} review:`,e)}},eJ=async e=>{_("Are you sure you want to delete this professor? This action cannot be undone.",async()=>{try{let s=await fetch(`${N.Sg}/api/moderation/admin/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:"admin@gmail.com",password:"gauravnihal123"})});if(!s.ok)throw Error("Failed to authenticate as admin");let t=(await s.json()).access_token,a=await fetch(`${N.Sg}/api/moderation/professors/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(a.ok)B(s=>s.filter(s=>s.id!==e)),I(s=>s.filter(s=>s.id!==e)),await eE(),k("Professor deleted successfully","success");else{let e=await a.json();k(`Failed to delete professor: ${e.detail||"Unknown error"}`,"error")}}catch(e){console.error("Failed to delete professor:",e),k("Failed to delete professor","error")}},"Delete Professor")},eH=e=>{K(e),Q(!0)},eW=async e=>{try{let s=await fetch(`${N.Sg}/api/moderation/admin/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:"admin@gmail.com",password:"gauravnihal123"})});if(!s.ok)throw Error("Failed to authenticate as admin");let t=(await s.json()).access_token,a=await fetch(`${N.Sg}/api/moderation/professors/${X.id}`,{method:"PUT",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(e)});if(a.ok)Q(!1),K(null),await eE(),k("Professor updated successfully","success");else{let e=await a.json();k(`Failed to update professor: ${e.detail||"Unknown error"}`,"error")}}catch(e){console.error("Failed to update professor:",e),k("Failed to update professor","error")}},eq=async()=>{eC(!0);try{let{data:{session:e}}=await v.OQ.auth.getSession();if(!e?.access_token){console.warn("No session token available");return}let s={Authorization:`Bearer ${e.access_token}`,"Content-Type":"application/json"},t=await fetch(`${N.Sg}/api/moderation/professor-reviews/all?status_filter=${ek||"all"}&limit=100`,{headers:s});if(t.ok){let e=await t.json();ev(e.reviews||[])}let a=await fetch(`${N.Sg}/api/moderation/professor-reviews/stats`,{headers:s});if(a.ok){let e=await a.json();ew(e)}}catch(e){console.error("Failed to load professor reviews:",e),k("Failed to load professor reviews","error")}finally{eC(!1)}},eY=async(e,s,t)=>{try{let{data:{session:a}}=await v.OQ.auth.getSession();if(!a?.access_token)return;let r=await fetch(`${N.Sg}/api/moderation/reviews/${e}/action`,{method:"POST",headers:{Authorization:`Bearer ${a.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({action:s,reason:t})});if(r.ok)k(`Review ${s}d successfully`,"success"),await eq();else{let e=await r.json().catch(()=>({}));k(`Failed to ${s} review: ${e.detail||r.statusText}`,"error")}}catch(e){console.error(`Failed to ${s} review:`,e),k(`Network error: Failed to ${s} review`,"error")}},eG=async()=>{eM(!0);try{let e=localStorage.getItem("adminSession"),s=null;if(e)try{s=JSON.parse(e).access_token}catch(e){console.error("Failed to parse admin session")}if(!s){let e=await fetch(`${N.Sg}/api/moderation/admin/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:"admin@gmail.com",password:"gauravnihal123"})});if(e.ok){let t=await e.json();s=t.access_token,localStorage.setItem("adminSession",JSON.stringify(t))}}if(!s)throw Error("Failed to get admin token");let t={Authorization:`Bearer ${s}`,"Content-Type":"application/json"},a=await fetch(`${N.Sg}/v1/college-review-moderation/admin/flagged-reviews?status_filter=${eZ||"pending"}&limit=100`,{headers:t});if(a.ok){let e=await a.json();eF(e.flagged_reviews||[])}let r=await fetch(`${N.Sg}/v1/college-review-moderation/admin/stats`,{headers:t});if(r.ok){let e=await r.json();eP(e)}}catch(e){console.error("Failed to load flagged college reviews:",e),k("Failed to load college reviews","error")}finally{eM(!1)}},eQ=async()=>{try{let e=localStorage.getItem("adminSession"),s=null;if(e?s=JSON.parse(e).access_token:l?.access_token&&(s=l.access_token),!s){console.warn("No admin token available for loading college reviews");return}let t={Authorization:`Bearer ${s}`,"Content-Type":"application/json"};console.log("Loading all college reviews...");let a=await fetch(`${N.Sg}/v1/college-review-moderation/admin/all-reviews?limit=50`,{headers:t});if(a.ok){let e=await a.json();console.log("College reviews loaded:",e.reviews?.length||0),eR(e.reviews||[])}else{let e=await a.json().catch(()=>({detail:"Unknown error"}));console.error("Failed to load all reviews:",a.status,e),k(`Failed to load college reviews: ${e.detail||a.statusText}`,"error")}}catch(e){console.error("Failed to load all college reviews:",e),k("Network error loading college reviews","error")}},eX=async(e,s)=>{try{let t=localStorage.getItem("adminSession"),a=null;if(t&&(a=JSON.parse(t).access_token),!a){k("Admin authentication required","error");return}let r=await fetch(`${N.Sg}/v1/college-review-moderation/admin/flags/${e}/review`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({action:s,admin_notes:"approve_flag"===s?"Flagged content removed by admin":"Flag dismissed by admin"})});if(r.ok)k("approve_flag"===s?"Flag approved successfully":"Flag dismissed successfully","success"),await eG();else{let e=await r.json();k(e.detail||"Action failed","error")}}catch(e){console.error("Failed to process flag action:",e),k("Failed to process action","error")}};return((0,r.useEffect)(()=>{S&&"college-reviews"===V&&(eG(),eQ())},[S,V,eZ]),(0,r.useEffect)(()=>{S&&"professor-reviews"===V&&eq()},[S,V,ek]),b||A)?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading admin panel..."})]})}):$||q?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i(),{children:[(0,a.jsx)("title",{children:"Admin Login - RateMyProf"}),(0,a.jsx)("meta",{name:"description",content:"Admin login for RateMyProf platform"})]}),(0,a.jsx)(j.Z,{isOpen:q,onClose:()=>s.push("/"),onLogin:eO})]}):S?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i(),{children:[(0,a.jsx)("title",{children:"Admin Dashboard - RateMyProf"}),(0,a.jsx)("meta",{name:"description",content:"Admin dashboard for managing RateMyProf platform"})]}),(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white shadow-sm",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(y(),{href:"/",children:(0,a.jsxs)("button",{className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors mr-4",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5 mr-2"}),"Back to Site"]})}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(c.Z,{className:"w-6 h-6 text-indigo-600 mr-2"}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Dashboard"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("button",{onClick:eB,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"Refresh Data"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Welcome, ",t?.email]})]})]})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6 mb-8",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>J("reviews"),children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(m.Z,{className:"w-8 h-8 text-red-600 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Flagged Reviews"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:D.flaggedReviews})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>J("professors"),children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(g,{className:"w-8 h-8 text-yellow-600 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"No Reviews Yet"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:D.pendingProfessors})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>J("pending-approval"),children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(c.Z,{className:"w-8 h-8 text-purple-600 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"New Submissions"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:D.pendingApproval})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>J("all-professors"),children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(h.Z,{className:"w-8 h-8 text-blue-600 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Professors"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:D.totalProfessors})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>J("users"),children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(h.Z,{className:"w-8 h-8 text-green-600 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Users"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:D.totalUsers})]})]})})]}),(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)("nav",{className:"flex space-x-8",children:[(0,a.jsx)("button",{onClick:()=>J("dashboard"),className:`py-2 px-1 border-b-2 font-medium text-sm ${"dashboard"===V?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Dashboard"}),(0,a.jsxs)("button",{onClick:()=>J("reviews"),className:`py-2 px-1 border-b-2 font-medium text-sm ${"reviews"===V?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Flagged Reviews (",D.flaggedReviews,")"]}),(0,a.jsxs)("button",{onClick:()=>J("professors"),className:`py-2 px-1 border-b-2 font-medium text-sm ${"professors"===V?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["No Reviews Yet (",D.pendingProfessors,")"]}),(0,a.jsxs)("button",{onClick:()=>J("pending-approval"),className:`py-2 px-1 border-b-2 font-medium text-sm ${"pending-approval"===V?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Pending Approval (",D.pendingApproval,")"]}),(0,a.jsxs)("button",{onClick:()=>J("all-professors"),className:`py-2 px-1 border-b-2 font-medium text-sm ${"all-professors"===V?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["All Professors (",D.totalProfessors,")"]}),(0,a.jsxs)("button",{onClick:()=>J("users"),className:`py-2 px-1 border-b-2 font-medium text-sm ${"users"===V?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Users (",D.totalUsers,")"]}),(0,a.jsx)("button",{onClick:()=>J("professor-reviews"),className:`py-2 px-1 border-b-2 font-medium text-sm ${"professor-reviews"===V?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Professor Reviews"}),(0,a.jsx)("button",{onClick:()=>J("college-reviews"),className:`py-2 px-1 border-b-2 font-medium text-sm ${"college-reviews"===V?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"College Reviews"})]})}),"dashboard"===V&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Review Moderation"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Review and moderate flagged reviews from users."}),(0,a.jsx)("button",{onClick:()=>J("reviews"),className:"w-full bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition-colors",children:"View Flagged Reviews"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Professor Management"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"View professors with no reviews yet and verify new submissions."}),(0,a.jsx)("button",{onClick:()=>J("professors"),className:"w-full bg-yellow-600 text-white px-4 py-2 rounded hover:bg-yellow-700 transition-colors",children:"View No Reviews"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"All Professors"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Edit, delete, or manage all professors in the database."}),(0,a.jsx)("button",{onClick:()=>J("all-professors"),className:"w-full bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition-colors",children:"Manage All Professors"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"User Management"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Manage user accounts and moderate user actions."}),(0,a.jsx)("button",{onClick:()=>J("users"),className:"w-full bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition-colors",children:"Manage Users"})]})]}),"reviews"===V&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Flagged Reviews"})}),(0,a.jsx)("div",{className:"p-6",children:0===Z.length?(0,a.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No flagged reviews at the moment"}):(0,a.jsx)("div",{className:"space-y-4",children:Z.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsxs)("h4",{className:"font-semibold",children:["Review #",e.id]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>eV(e.id,"approve"),className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700",children:"Approve"}),(0,a.jsx)("button",{onClick:()=>eV(e.id,"delete"),className:"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700",children:"Delete"})]})]}),(0,a.jsx)("p",{className:"text-gray-700 mb-2",children:e.content}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Rating: ",e.rating,"/5"]})]},e.id))})})]}),"professors"===V&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Professors With No Reviews Yet"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"These professors are verified and visible in search, but haven't received any student reviews yet."})]}),(0,a.jsx)("div",{className:"p-6",children:0===T.length?(0,a.jsx)("p",{className:"text-gray-500 text-center py-8",children:"All professors have reviews!"}):(0,a.jsx)("div",{className:"space-y-4",children:T.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsx)("h4",{className:"font-semibold",children:e.name}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"No reviews yet"})]}),(0,a.jsxs)("p",{className:"text-gray-700",children:["Department: ",e.department]}),(0,a.jsxs)("p",{className:"text-gray-700",children:["Designation: ",e.designation||"Faculty"]}),(0,a.jsxs)("p",{className:"text-gray-700",children:["College ID: ",e.college_id]}),e.subjects&&e.subjects.length>0&&(0,a.jsxs)("p",{className:"text-gray-700",children:["Subjects: ",e.subjects.join(", ")]})]},e.id))})})]}),"all-professors"===V&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"All Professors Management"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Edit, delete, or manage all professors in the database"})]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:em?(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),"Loading: ",E.length," of ",D.totalProfessors,"..."]}):(0,a.jsxs)("span",{children:["Total: ",E.length," professors"]})})]})}),(0,a.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Professors"}),(0,a.jsx)("input",{type:"text",placeholder:"Search by name...",value:er,onChange:e=>el(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),(0,a.jsxs)("select",{value:ei,onChange:e=>en(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"All Departments"}),Array.from(new Set(E.map(e=>e.department).filter(Boolean))).sort().map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),(0,a.jsxs)("select",{value:eo,onChange:e=>ed(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"name",children:"Name (A-Z)"}),(0,a.jsx)("option",{value:"reviews",children:"Most Reviews"}),(0,a.jsx)("option",{value:"rating",children:"Highest Rating"})]})]})]})}),(0,a.jsx)("div",{className:"p-6",children:em&&0===E.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 mb-2",children:"Loading professors..."}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"This may take a moment for large databases"})]}):((e=E.filter(e=>{let s=!er||e.name.toLowerCase().includes(er.toLowerCase()),t=!ei||e.department===ei;return s&&t})).sort((e,s)=>"name"===eo?e.name.localeCompare(s.name):"reviews"===eo?(s.total_reviews||0)-(e.total_reviews||0):(s.average_rating||0)-(e.average_rating||0)),0===e.length)?(0,a.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No professors match your filters"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-4 text-sm text-gray-600",children:["Showing ",e.length," of ",E.length," professors"]}),(0,a.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Rating: ",e.average_rating.toFixed(1),"/5.0 (",e.total_reviews," reviews)"]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>eH(e),className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>eJ(e.id),className:"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700",children:"Delete"})]})]}),(0,a.jsxs)("p",{className:"text-gray-700",children:["Department: ",e.department]}),(0,a.jsxs)("p",{className:"text-gray-700",children:["Designation: ",e.designation||"Faculty"]}),(0,a.jsxs)("p",{className:"text-gray-700",children:["College ID: ",e.college_id]}),e.subjects&&e.subjects.length>0&&(0,a.jsxs)("p",{className:"text-gray-700",children:["Subjects: ",e.subjects.join(", ")]})]},e.id))})]})})]}),"pending-approval"===V&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Professors Pending Approval"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Review and approve new professor submissions"})]}),(0,a.jsx)("div",{className:"p-6",children:0===z.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(c.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No professors pending approval"})]}):(0,a.jsx)("div",{className:"space-y-4",children:z.map(e=>(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-6 hover:bg-gray-50",children:(0,a.jsx)("div",{className:"flex justify-between items-start",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:e.name}),(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Pending Review"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,a.jsx)("strong",{children:"Email:"})," ",e.email||"Not provided"]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,a.jsx)("strong",{children:"Department:"})," ",e.department]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,a.jsx)("strong",{children:"Designation:"})," ",e.designation||"Not specified"]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,a.jsx)("strong",{children:"College ID:"})," ",e.college_id]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,a.jsx)("strong",{children:"Subjects:"})," ",e.subjects?e.subjects.join(", "):"None specified"]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,a.jsx)("strong",{children:"Experience:"})," ",e.years_of_experience?`${e.years_of_experience} years`:"Not specified"]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,a.jsx)("strong",{children:"Submitted:"})," ",new Date(e.created_at).toLocaleDateString()]}),e.biography&&(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,a.jsx)("strong",{children:"Biography:"})," ",e.biography.length>100?e.biography.substring(0,100)+"...":e.biography]})]})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsxs)("button",{onClick:async()=>{try{let s=null,t=localStorage.getItem("adminSession");if(t)try{s=JSON.parse(t).access_token}catch(e){console.error("Failed to parse admin session")}if(!s){console.error("No admin token available");return}let a=await fetch(`${N.Sg}/api/moderation/professors/${e.id}/verify`,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({action:"verify",verification_notes:"Approved by admin"})});if(a.ok)I(s=>s.filter(s=>s.id!==e.id)),await eE(),console.log("Professor approved successfully");else{let e=await a.text();console.error("Failed to approve professor:",a.status,e)}}catch(e){console.error("Error approving professor:",e)}},className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[(0,a.jsx)(g,{className:"h-4 w-4 mr-1"}),"Approve"]}),(0,a.jsx)("button",{onClick:async()=>{try{let s=null,t=localStorage.getItem("adminSession");if(t)try{s=JSON.parse(t).access_token}catch(e){console.error("Failed to parse admin session")}if(!s){console.error("No admin token available");return}let a=await fetch(`${N.Sg}/api/moderation/professors/${e.id}/verify`,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({action:"reject",verification_notes:"Rejected by admin"})});if(a.ok)I(s=>s.filter(s=>s.id!==e.id)),await eE(),console.log("Professor rejected successfully");else{let e=await a.text();console.error("Failed to reject professor:",a.status,e)}}catch(e){console.error("Error rejecting professor:",e)}},className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Reject"})]})]})})},e.id))})})]}),"users"===V&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Registered Users"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"All users who have registered accounts. Registration is required to submit reviews and add professors."})]}),(0,a.jsx)("div",{className:"p-6",children:0===U.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(h.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500 mb-2 font-medium",children:"No Registered Users Yet"}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-4 max-w-2xl mx-auto text-left",children:[(0,a.jsx)("h4",{className:"font-semibold text-blue-900 mb-2",children:"User Registration"}),(0,a.jsxs)("div",{className:"text-sm text-blue-800 space-y-2",children:[(0,a.jsxs)("p",{children:["• ",(0,a.jsx)("strong",{children:"Registration Required:"})," Users must create an account to submit reviews"]}),(0,a.jsxs)("p",{children:["• ",(0,a.jsx)("strong",{children:"What Users Can Do:"})," Rate professors, write reviews, add new professors, vote on reviews"]}),(0,a.jsxs)("p",{children:["• ",(0,a.jsx)("strong",{children:"This Tab Shows:"})," All users registered via email/password or social login"]})]})]}),(0,a.jsx)("button",{onClick:eB,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Refresh Data"})]}):(0,a.jsx)("div",{className:"space-y-4",children:U.map(e=>(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-6 hover:bg-gray-50",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:e.display_name||(e.first_name&&e.last_name?`${e.first_name} ${e.last_name}`:null)||e.email.split("@")[0]}),(0,a.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${e.is_banned?"bg-red-100 text-red-800":e.is_verified?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:e.is_banned?"Banned":e.is_verified?"Verified":"Unverified"}),e.is_admin&&(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"Admin"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Email:"})," ",e.email]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Joined:"})," ",new Date(e.created_at).toLocaleDateString()]}),e.last_login&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Last Login:"})," ",new Date(e.last_login).toLocaleDateString()]}),e.college_id&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"College ID:"})," ",e.college_id]})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[e.is_banned?(0,a.jsx)("button",{onClick:()=>{_(`Are you sure you want to unban ${e.email}?`,async()=>{try{k("Unban user functionality coming soon","info")}catch(e){k("Failed to unban user","error")}},"Unban User")},className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700 transition-colors",children:"Unban User"}):(0,a.jsx)("button",{onClick:()=>{_(`Are you sure you want to ban ${e.email}? They will not be able to log in or submit reviews.`,async()=>{try{k("Ban user functionality coming soon","info")}catch(e){k("Failed to ban user","error")}},"Ban User")},className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors",children:"Ban User"}),(0,a.jsx)("button",{onClick:()=>{ea(e),es(!0)},className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"View Details"})]})]})},e.id))})})]}),"professor-reviews"===V&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 bg-yellow-100 rounded-md p-3",children:(0,a.jsx)(m.Z,{className:"h-6 w-6 text-yellow-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Pending Reviews"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:eN.pending_reviews})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 bg-blue-100 rounded-md p-3",children:(0,a.jsx)(m.Z,{className:"h-6 w-6 text-blue-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Flags"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:eN.total_flags})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 bg-red-100 rounded-md p-3",children:(0,a.jsx)(c.Z,{className:"h-6 w-6 text-red-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Flagged Reviews"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:eN.flagged_reviews})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 bg-green-100 rounded-md p-3",children:(0,a.jsx)(g,{className:"h-6 w-6 text-green-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Reviews"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:eN.total_reviews})]})]})})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Filter by status:"}),(0,a.jsxs)("select",{value:ek,onChange:e=>e_(e.target.value),className:"rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[(0,a.jsx)("option",{value:"pending",children:"Pending Review"}),(0,a.jsx)("option",{value:"approved",children:"Approved"}),(0,a.jsx)("option",{value:"removed",children:"Removed"}),(0,a.jsx)("option",{value:"flagged",children:"Flagged Only"}),(0,a.jsx)("option",{value:"all",children:"All Reviews"})]}),(0,a.jsx)("button",{onClick:eq,disabled:eS,className:"ml-auto px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50",children:eS?"Loading...":"Refresh"})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,a.jsxs)("div",{className:"px-6 py-4 bg-gray-50 border-b",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Professor Reviews"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"View all submitted professor reviews and their authors"})]}),eS?(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading reviews..."})]}):0===ej.length?(0,a.jsx)("div",{className:"p-8 text-center text-gray-500",children:(0,a.jsx)("p",{children:"No professor reviews found"})}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Professor"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Review Content"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Flag Type"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reason"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Flagged Date"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:ej.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.professor_name}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.college_name}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:e.college_city})]}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"text-sm text-gray-900 max-w-md",children:[(0,a.jsxs)("div",{className:"font-medium",children:["Course: ",e.course_name]}),(0,a.jsxs)("div",{className:"mt-1",children:["Rating: ",e.overall_rating,"/5 ⭐"]}),e.review_text&&(0,a.jsx)("div",{className:"mt-2 text-gray-600 line-clamp-3",children:e.review_text})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.has_flags?(0,a.jsxs)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:["Flagged (",e.flag_count,")"]}):(0,a.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800",children:"Clean"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.has_flags?"User reported":"N/A"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${"pending"===e.status?"bg-yellow-100 text-yellow-800":"approved"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.status})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:"pending"===e.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>eY(e.id,"approve","Approved by admin"),className:"text-green-600 hover:text-green-900",children:"Approve"}),(0,a.jsx)("button",{onClick:()=>eY(e.id,"remove","Policy violation"),className:"text-red-600 hover:text-red-900",children:"Dismiss"})]})})]},e.id))})]})})]})]}),"college-reviews"===V&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 bg-yellow-100 rounded-md p-3",children:(0,a.jsx)(m.Z,{className:"h-6 w-6 text-yellow-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Pending Flags"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:eD.pending_college_review_flags})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 bg-blue-100 rounded-md p-3",children:(0,a.jsx)(m.Z,{className:"h-6 w-6 text-blue-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Flags"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:eD.total_college_review_flags})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 bg-red-100 rounded-md p-3",children:(0,a.jsx)(c.Z,{className:"h-6 w-6 text-red-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Flagged Reviews"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:eD.flagged_college_reviews})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 bg-green-100 rounded-md p-3",children:(0,a.jsx)(g,{className:"h-6 w-6 text-green-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Reviews"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:eD.total_college_reviews})]})]})})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Filter by status:"}),(0,a.jsxs)("select",{value:eZ,onChange:e=>eL(e.target.value),className:"rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[(0,a.jsx)("option",{value:"pending",children:"Pending Review"}),(0,a.jsx)("option",{value:"approved",children:"Approved Flags"}),(0,a.jsx)("option",{value:"dismissed",children:"Dismissed Flags"}),(0,a.jsx)("option",{value:"",children:"All Flags"})]}),(0,a.jsx)("button",{onClick:eG,disabled:eT,className:"ml-auto px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50",children:eT?"Loading...":"Refresh"})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,a.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-b",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Flagged College Reviews"})}),eT?(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading flagged reviews..."})]}):0===eA.length?(0,a.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,a.jsx)(m.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),(0,a.jsx)("p",{children:"No flagged college reviews found"}),(0,a.jsx)("p",{className:"text-sm mt-2",children:"Change the filter to see different results"})]}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"College"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Review Content"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Flag Type"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Reason"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Flagged Date"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:eA.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsxs)("td",{className:"px-6 py-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.college?.name||"Unknown College"}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[e.college?.city,", ",e.college?.state]})]}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"text-sm text-gray-900 max-w-md",children:[(0,a.jsx)("p",{className:"line-clamp-2",children:e.college_review?.review_text||"No content"}),(0,a.jsxs)("div",{className:"mt-1 flex items-center space-x-2 text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:["Rating: ",e.college_review?.overall_rating||"N/A","/5"]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:["Reviews: ",e.college_review?.total_reviews||0]})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${"spam"===e.flag_type?"bg-red-100 text-red-800":"fake"===e.flag_type?"bg-orange-100 text-orange-800":"offensive"===e.flag_type?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:e.flag_type})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("div",{className:"text-sm text-gray-600 max-w-xs truncate",children:e.reason||"No reason provided"})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${"pending"===e.status?"bg-yellow-100 text-yellow-800":"approved"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:e.status})}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()}),(0,a.jsxs)("td",{className:"px-6 py-4 text-sm space-x-2",children:["pending"===e.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>eX(e.id,"approve_flag"),className:"text-green-600 hover:text-green-900 font-medium",children:"Approve"}),(0,a.jsx)("button",{onClick:()=>eX(e.id,"dismiss_flag"),className:"text-red-600 hover:text-red-900 font-medium",children:"Dismiss"})]}),"pending"!==e.status&&(0,a.jsx)("span",{className:"text-gray-400",children:"approved"===e.status?"Flag Approved":"Flag Dismissed"})]})]},e.id))})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden mt-6",children:[(0,a.jsxs)("div",{className:"px-6 py-4 bg-gray-50 border-b",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"All College Reviews"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"View all submitted college reviews and their authors"})]}),0===e$.length?(0,a.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,a.jsx)(p.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),(0,a.jsx)("p",{children:"No college reviews found"})]}):(0,a.jsx)("div",{className:"divide-y divide-gray-200",children:e$.map(e=>(0,a.jsxs)("div",{className:"p-6 hover:bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:e.colleges?.name||"Unknown College"}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 mt-1",children:[e.colleges?.city,", ",e.colleges?.state]}),(0,a.jsxs)("div",{className:"text-sm text-indigo-600 mt-1 font-medium",children:["Author: ",e.author?.email||e.author?.username||"Anonymous"]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-indigo-600",children:e.ratings?.overall?.toFixed(1)||"N/A"}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Overall Rating"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-4",children:[(0,a.jsx)("span",{className:"font-medium",children:e.course_name}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{children:e.year_of_study}),e.graduation_year&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:["Class of ",e.graduation_year]})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-3 mb-4",children:[{key:"teaching",label:"Teaching"},{key:"facilities",label:"Facilities"},{key:"opportunities",label:"Opportunities"},{key:"clubs",label:"Clubs"},{key:"internet",label:"Internet"},{key:"food",label:"Food"}].map(s=>(0,a.jsxs)("div",{className:"text-center bg-gray-50 rounded-lg p-2",children:[(0,a.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:s.label}),(0,a.jsx)("div",{className:"text-lg font-semibold text-gray-900",children:e.ratings?.[s.key]?.toFixed(1)||"N/A"})]},s.key))}),e.review_text&&(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:(0,a.jsx)("p",{className:"text-gray-700 text-sm",children:e.review_text})}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 pt-4 border-t border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4 mr-1 text-green-600"}),e.helpful_count||0," helpful"]}),(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(f.Z,{className:"w-4 h-4 mr-1 text-red-600"}),e.not_helpful_count||0," not helpful"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("span",{className:`px-2 py-1 rounded text-xs font-medium ${"approved"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:e.status}),(0,a.jsx)("span",{children:new Date(e.created_at).toLocaleDateString()})]})]})]},e.id))})]})]}),"dashboard"===V&&(0,a.jsxs)("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Admin API Documentation"}),(0,a.jsx)("p",{className:"text-blue-800 mb-4",children:"Access the complete admin API documentation for advanced management features."}),(0,a.jsx)("button",{onClick:()=>window.open(`${N.Sg}/docs`,"_blank"),className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 transition-colors",children:"Open API Docs"})]})]})]}),H&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-md mx-4 transform animate-pulse",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mx-auto mb-4",children:(0,a.jsx)(c.Z,{className:"w-8 h-8 text-green-600"})}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Admin Access Granted! \uD83C\uDF89"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Welcome to the RateMyProf admin panel. You now have full access to manage professors, reviews, and users."}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-sm text-green-600",children:[(0,a.jsx)(g,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Successfully authenticated as admin"})]})]})]})}),(0,a.jsx)(j.Z,{isOpen:q,onClose:()=>Y(!1),onLogin:eO}),G&&X&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Edit Professor: ",X.name]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let s=new FormData(e.target),t={},a=s.get("name");a&&a!==X.name&&(t.name=a);let r=s.get("email");r&&r!==X.email&&(t.email=r);let l=s.get("department");l&&l!==X.department&&(t.department=l);let i=s.get("designation");i&&i!==X.designation&&(t.designation=i);let n=s.get("biography");n&&n!==X.biography&&(t.biography=n);let o=s.get("years_of_experience");o&&o!==X.years_of_experience?.toString()&&(t.years_of_experience=parseInt(o));let d=s.get("education");d&&d!==X.education&&(t.education=d);let c=s.get("research_interests");c&&c!==X.research_interests&&(t.research_interests=c),Object.keys(t).length>0?eW(t):k("No changes detected","info")},children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,a.jsx)("input",{type:"text",name:"name",defaultValue:X.name,className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,a.jsx)("input",{type:"email",name:"email",defaultValue:X.email,className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),(0,a.jsx)("input",{type:"text",name:"department",defaultValue:X.department,className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Designation"}),(0,a.jsx)("input",{type:"text",name:"designation",defaultValue:X.designation,className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Years of Experience"}),(0,a.jsx)("input",{type:"number",name:"years_of_experience",defaultValue:X.years_of_experience,className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Education"}),(0,a.jsx)("textarea",{name:"education",defaultValue:X.education,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Research Interests"}),(0,a.jsx)("textarea",{name:"research_interests",defaultValue:X.research_interests,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Biography"}),(0,a.jsx)("textarea",{name:"biography",defaultValue:X.biography,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{Q(!1),K(null)},className:"px-4 py-2 text-gray-600 bg-gray-200 rounded hover:bg-gray-300",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Update Professor"})]})]})]})}),ee&&et&&(0,a.jsxs)("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"user-details-modal",role:"dialog","aria-modal":"true",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-60 backdrop-blur-sm transition-opacity animate-backdropFadeIn",onClick:()=>{es(!1),ea(null)}}),(0,a.jsx)("div",{className:"flex min-h-full items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-2xl w-full transform transition-all animate-modalFadeIn",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"relative bg-gradient-to-r from-blue-600 to-purple-600 rounded-t-2xl px-6 py-8 text-white",children:[(0,a.jsx)("button",{onClick:()=>{es(!1),ea(null)},className:"absolute top-4 right-4 text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition-all","aria-label":"Close modal",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-white bg-opacity-20 rounded-full flex items-center justify-center text-3xl font-bold backdrop-blur-sm",children:et.first_name&&et.last_name?`${et.first_name[0]}${et.last_name[0]}`:et.email[0].toUpperCase()}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-1",children:et.first_name&&et.last_name?`${et.first_name} ${et.last_name}`:et.email.split("@")[0]}),(0,a.jsx)("p",{className:"text-blue-100 text-sm",children:et.email}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[(0,a.jsx)("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold ${et.is_banned?"bg-red-500 text-white":et.is_active?"bg-green-500 text-white":"bg-yellow-500 text-white"}`,children:et.is_banned?"\uD83D\uDEAB Banned":et.is_active?"✓ Active":"⏳ Pending"}),et.is_admin&&(0,a.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-purple-500 text-white",children:"\uD83D\uDC51 Admin"})]})]})]})]}),(0,a.jsxs)("div",{className:"px-6 py-6 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 border border-blue-200",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),(0,a.jsx)("h3",{className:"text-sm font-semibold text-blue-900",children:"User ID"})]}),(0,a.jsx)("p",{className:"text-xs text-blue-700 font-mono break-all",children:et.id})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 border border-green-200",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,a.jsx)("h3",{className:"text-sm font-semibold text-green-900",children:"Member Since"})]}),(0,a.jsx)("p",{className:"text-sm text-green-700 font-medium",children:new Date(et.created_at).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})})]}),et.last_login&&(0,a.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4 border border-purple-200",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsx)("h3",{className:"text-sm font-semibold text-purple-900",children:"Last Login"})]}),(0,a.jsx)("p",{className:"text-sm text-purple-700 font-medium",children:new Date(et.last_login).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})})]}),et.college_id&&(0,a.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-4 border border-orange-200",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),(0,a.jsx)("h3",{className:"text-sm font-semibold text-orange-900",children:"College ID"})]}),(0,a.jsx)("p",{className:"text-sm text-orange-700 font-medium",children:et.college_id})]})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-6 border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,a.jsx)("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Activity Statistics"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total Reviews"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:et.total_reviews||0})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Flags Submitted"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-red-600",children:et.total_flags_submitted||0})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})})})]})})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[et.is_banned?(0,a.jsx)("button",{onClick:()=>{es(!1),_(`Are you sure you want to unban ${et.email}?`,async()=>{try{k("Unban user functionality coming soon","info")}catch(e){k("Failed to unban user","error")}},"Unban User")},className:"px-5 py-2.5 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-all shadow-md hover:shadow-lg transform hover:scale-105",children:"✅ Unban User"}):(0,a.jsx)("button",{onClick:()=>{es(!1),_(`Are you sure you want to ban ${et.email}? They will not be able to log in or submit reviews.`,async()=>{try{k("Ban user functionality coming soon","info")}catch(e){k("Failed to ban user","error")}},"Ban User")},className:"px-5 py-2.5 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition-all shadow-md hover:shadow-lg transform hover:scale-105",children:"\uD83D\uDEAB Ban User"}),(0,a.jsx)("button",{onClick:()=>{es(!1),ea(null)},className:"px-5 py-2.5 bg-gray-200 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-300 transition-all",children:"Close"})]})]})]})})]})]}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(c.Z,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"You don't have permission to access the admin panel"}),(0,a.jsx)("button",{onClick:()=>s.push("/"),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Go Home"})]})})}},9008:function(e,s,t){e.exports=t(3867)}},function(e){e.O(0,[664,888,774,179],function(){return e(e.s=577)}),_N_E=e.O()}]);