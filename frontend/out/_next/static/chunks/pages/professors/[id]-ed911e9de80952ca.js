(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[195],{9796:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/professors/[id]",function(){return t(5788)}])},2761:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},2089:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},185:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},3346:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},4307:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},4795:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]])},2126:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},2933:function(e,s,t){"use strict";var a=t(5893),r=t(7294);s.Z=({rating:e,onRatingChange:s,label:t,description:l,error:i})=>{let[n,c]=(0,r.useState)(0),o=[{value:1,label:"Poor"},{value:2,label:"Fair"},{value:3,label:"Good"},{value:4,label:"Very Good"},{value:5,label:"Awesome"}],d=e=>["bg-red-400","bg-orange-400","bg-yellow-400","bg-green-300","bg-green-500"][e-1],x=s=>n>0?s<=n:s<=e,m=s=>{let t=x(s);return e>0&&s<=e?"opacity-100":t?"opacity-70":"opacity-20"},h=n>0?o[n-1]:e>0?o[e-1]:null;return(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t,(0,a.jsx)("span",{className:"text-red-500 ml-1",children:"*"}),l&&(0,a.jsx)("span",{className:"text-gray-500 text-xs block mt-1",children:l})]}),(0,a.jsx)("div",{className:"flex items-center justify-center mb-3",children:(0,a.jsx)("div",{className:"flex items-center rounded-full overflow-hidden shadow-md",onMouseLeave:()=>c(0),children:o.map((e,t)=>(0,a.jsx)("button",{type:"button",onClick:()=>s(e.value),onMouseEnter:()=>c(e.value),className:`
                relative h-14 w-20
                ${d(e.value)}
                ${m(e.value)}
                ${0===t?"rounded-l-full":""}
                ${t===o.length-1?"rounded-r-full":""}
                transition-all duration-300 ease-in-out
                transform hover:scale-105
                focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500
              `,"aria-label":`Rate ${e.value} - ${e.label}`,children:t<o.length-1&&(0,a.jsx)("div",{className:"absolute right-0 top-1/2 transform -translate-y-1/2 w-px h-8 bg-white opacity-30"})},e.value))})}),(0,a.jsx)("div",{className:"text-center",children:h?(0,a.jsxs)("p",{className:"text-sm text-gray-600 font-medium transition-all duration-200",children:[h.value," - ",h.label]}):(0,a.jsx)("p",{className:"text-sm text-gray-400 italic",children:"Select a rating"})}),i&&(0,a.jsx)("p",{className:"text-red-600 text-xs mt-2 text-center",children:i})]})}},5788:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return Y}});var a=t(5893),r=t(7294),l=t(1163),i=t(9008),n=t.n(i),c=t(1664),o=t.n(c),d=t(837),x=t(2184),m=t(8844),h=t(3911),u=t(2933),g=t(5871),f=t(4598),y=t(2089),p=t(3346),b=t(3759);let v=(0,b.Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var j=t(2171),w=t(493),N=t(2190);let _=(0,b.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var k=t(4307);let S=(0,b.Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);var C=t(3765);let Z=["Sem 1","Sem 2","Sem 3","Sem 4","Sem 5","Sem 6","Sem 7","Sem 8"],$=["2024-25","2023-24","2022-23"],P=["Amazing Lectures","Tough Grader","Caring","Clear Explanations","Helpful","Inspiring","Fair Testing","Good Feedback","Approachable","Expert Knowledge"];function F({professor:e,onCancel:s,onSubmit:t}){let{user:l}=(0,d.a)(),{showToast:i}=(0,m.l)(),[n,c]=(0,r.useState)(1),[x,b]=(0,r.useState)(!1),[F,T]=(0,r.useState)(!1),[M,R]=(0,r.useState)(!1),[E,O]=(0,r.useState)({professor_id:e.id,course_name:"",semester:"",academic_year:$[0],overall_rating:0,difficulty_rating:0,clarity_rating:0,helpfulness_rating:0,attendance_mandatory:null,assignment_load:"moderate",review_text:"",tags:[]}),[A,z]=(0,r.useState)({}),D=e=>{let s={};switch(e){case 1:E.course_name||(s.course_name="Please enter a course name"),E.semester||(s.semester="Please select semester"),E.academic_year||(s.academic_year="Please select academic year");break;case 2:0===E.overall_rating&&(s.overall_rating="Please provide overall rating"),0===E.difficulty_rating&&(s.difficulty_rating="Please rate difficulty"),0===E.clarity_rating&&(s.clarity_rating="Please rate teaching clarity"),0===E.helpfulness_rating&&(s.helpfulness_rating="Please rate helpfulness");break;case 3:break;case 4:E.review_text.trim().length<50&&(s.review_text="Please write at least 50 characters"),E.review_text.trim().length>1e3&&(s.review_text="Review must be less than 1000 characters")}return z(s),0===Object.keys(s).length},H=async()=>{if(D(4)){b(!0);try{let s={professor_id:e.id,ratings:{clarity:E.clarity_rating||1,helpfulness:E.helpfulness_rating||1,workload:6-(E.difficulty_rating||1),engagement:E.overall_rating||1},review_text:E.review_text?.trim()||null,semester_taken:E.semester||null,course_taken:E.course_name||null},{data:{session:a}}=await h.OQ.auth.getSession();if(!a)throw Error("No authentication session found");let r=await fetch(`${g.CT}/reviews`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a.access_token}`},body:JSON.stringify(s)});if(!r.ok){let e=await r.json();if(409===r.status){T(!0);return}throw Error(e.detail||"Failed to submit review")}let l=await r.json();console.log("Review submitted successfully:",l),i("Review submitted successfully!","success"),t(E)}catch(e){console.error("Failed to submit review:",e),i(e instanceof Error?e.message:"Failed to submit review. Please try again.","error")}finally{b(!1)}}},L=(e,s,t,r,l)=>(0,a.jsx)(u.Z,{rating:e,onRatingChange:s,label:t,description:r,error:l?A[l]:void 0});return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("div",{className:"flex space-x-2",children:[1,2,3,4].map(e=>(0,a.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-medium ${e===n?"bg-indigo-600 text-white":e<n?"bg-green-600 text-white":"bg-gray-200 text-gray-600"}`,children:e<n?(0,a.jsx)(w.Z,{className:"w-4 h-4"}):e},e))}),(0,a.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(N.Z,{className:"w-5 h-5"})})]}),(0,a.jsx)("div",{className:"min-h-[400px]",children:(()=>{switch(n){case 1:return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Review Settings & Course Information"}),(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)(f.Z,{className:"w-5 h-5 text-blue-600 mr-3 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-blue-900",children:"\uD83D\uDD12 All reviews are anonymous by default"}),(0,a.jsx)("p",{className:"text-xs text-blue-700 mt-1",children:'Your identity will never be publicly displayed. Only administrators can see review authors for moderation purposes. All reviews show as "Verified Student".'})]})]})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,a.jsx)(y.Z,{className:"w-4 h-4 inline mr-1"}),"Course/Subject Name"]}),(0,a.jsx)("input",{type:"text",value:E.course_name,onChange:e=>O({...E,course_name:e.target.value}),placeholder:"Enter course name (e.g., Data Structures, Machine Learning, etc.)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),A.course_name&&(0,a.jsx)("p",{className:"text-red-600 text-xs mt-1",children:A.course_name}),e.subjects&&e.subjects.length>0&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Popular subjects for this professor:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.subjects.map((e,s)=>(0,a.jsx)("button",{type:"button",onClick:()=>O({...E,course_name:e}),className:"text-xs px-2 py-1 bg-indigo-100 text-indigo-700 rounded-full hover:bg-indigo-200 transition-colors",children:e},s))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Semester Taken"}),(0,a.jsxs)("select",{value:E.semester,onChange:e=>O({...E,semester:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"",children:"Select semester"}),Z.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),A.semester&&(0,a.jsx)("p",{className:"text-red-600 text-xs mt-1",children:A.semester})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4 inline mr-1"}),"Academic Year"]}),(0,a.jsx)("select",{value:E.academic_year,onChange:e=>O({...E,academic_year:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:$.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]})]});case 2:return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Rate the Professor"}),L(E.overall_rating,e=>O({...E,overall_rating:e}),"Overall Rating","Your overall experience with this professor","overall_rating"),L(E.difficulty_rating,e=>O({...E,difficulty_rating:e}),"Difficulty Level","1 = Very Easy, 5 = Bohot (Very) Hard","difficulty_rating"),L(E.clarity_rating,e=>O({...E,clarity_rating:e}),"Teaching Clarity","How clear and understandable were the explanations?","clarity_rating"),L(E.helpfulness_rating,e=>O({...E,helpfulness_rating:e}),"Helpfulness","How willing and helpful was the professor outside class?","helpfulness_rating")]});case 3:return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Course Experience"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Was attendance mandatory?"}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",value:"true",checked:!0===E.attendance_mandatory,onChange:()=>O({...E,attendance_mandatory:!0}),className:"mr-2 text-indigo-600 focus:ring-indigo-500"}),"Yes"]}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",value:"false",checked:!1===E.attendance_mandatory,onChange:()=>O({...E,attendance_mandatory:!1}),className:"mr-2 text-indigo-600 focus:ring-indigo-500"}),"No"]}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",value:"null",checked:null===E.attendance_mandatory,onChange:()=>O({...E,attendance_mandatory:null}),className:"mr-2 text-indigo-600 focus:ring-indigo-500"}),"Optional/Mixed"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assignment/Workload"}),(0,a.jsx)("div",{className:"flex space-x-4",children:["light","moderate","heavy"].map(e=>(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",value:e,checked:E.assignment_load===e,onChange:()=>O({...E,assignment_load:e}),className:"mr-2 text-indigo-600 focus:ring-indigo-500"}),e.charAt(0).toUpperCase()+e.slice(1)]},e))})]})]});case 4:return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Written Review & Tags"}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg overflow-hidden",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>R(!M),className:"w-full flex items-center justify-between p-4 text-left hover:bg-blue-100 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(f.Z,{className:"w-5 h-5 text-blue-600 mr-2"}),(0,a.jsx)("span",{className:"font-medium text-blue-900",children:"Guidelines"})]}),M?(0,a.jsx)(v,{className:"w-5 h-5 text-blue-600"}):(0,a.jsx)(j.Z,{className:"w-5 h-5 text-blue-600"})]}),M&&(0,a.jsxs)("div",{className:"px-4 pb-4 space-y-2",children:[(0,a.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1.5",children:[(0,a.jsx)("li",{children:"• Your rating could be removed if you use profanity or derogatory terms."}),(0,a.jsx)("li",{children:"• Don't claim that the professor shows bias or favoritism for or against students."}),(0,a.jsx)("li",{children:"• Don't forget to proof read!"})]}),(0,a.jsx)(o(),{href:"/guidelines",target:"_blank",className:"inline-flex items-center text-sm font-medium text-blue-600 hover:text-blue-800 underline",children:"View all guidelines"})]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Discuss the professor's professional abilities including teaching style and ability to convey the material clearly"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Your Review",(0,a.jsx)("span",{className:"text-gray-500 text-xs block",children:"Share your experience to help fellow students (50-1000 characters)"})]}),(0,a.jsx)("textarea",{value:E.review_text,onChange:e=>O({...E,review_text:e.target.value}),rows:5,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none",placeholder:"Describe your experience with this professor. How were the lectures? Was the professor helpful? Any tips for future students?"}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,a.jsxs)("span",{children:[E.review_text.length,"/1000 characters"]}),(0,a.jsx)("span",{children:E.review_text.length<50?`${50-E.review_text.length} more needed`:""})]}),A.review_text&&(0,a.jsx)("p",{className:"text-red-600 text-xs mt-1",children:A.review_text})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Quick Tags (Optional)",(0,a.jsx)("span",{className:"text-gray-500 text-xs block",children:"Select tags that describe this professor"})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:P.map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>{let s=E.tags.includes(e)?E.tags.filter(s=>s!==e):[...E.tags,e];O({...E,tags:s})},className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${E.tags.includes(e)?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:e},e))})]})]});default:return null}})()}),(0,a.jsxs)("div",{className:"flex justify-between pt-4 border-t border-gray-200",children:[(0,a.jsxs)("button",{onClick:()=>{c(n-1),z({})},disabled:1===n,className:"flex items-center px-4 py-2 text-gray-600 disabled:text-gray-400 hover:text-gray-800 disabled:cursor-not-allowed",children:[(0,a.jsx)(_,{className:"w-4 h-4 mr-1"}),"Previous"]}),n<4?(0,a.jsxs)("button",{onClick:()=>{D(n)&&c(n+1)},className:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:["Next",(0,a.jsx)(k.Z,{className:"w-4 h-4 ml-1"})]}):(0,a.jsx)("button",{onClick:H,disabled:x,className:"flex items-center px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50",children:x?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Submitting..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S,{className:"w-4 h-4 mr-2"}),"Submit Review"]})})]}),F&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4 shadow-xl",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(C.Z,{className:"h-6 w-6 text-amber-500 mr-3"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Already Reviewed"})]}),(0,a.jsxs)("p",{className:"text-gray-600 mb-6",children:["You've already submitted a review for ",(0,a.jsx)("strong",{children:e.name}),". Each user can only review a professor once to maintain authenticity."]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,a.jsx)("button",{onClick:()=>{T(!1),window.location.href="/my-reviews"},className:"flex-1 bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 transition-colors",children:"View My Reviews"}),(0,a.jsx)("button",{onClick:()=>T(!1),className:"flex-1 bg-gray-100 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-200 transition-colors",children:"Close"})]})]})})]})}var T=t(4795),M=t(9200);let R=[{value:"inappropriate_content",label:"Inappropriate Content"},{value:"spam",label:"Spam"},{value:"fake_review",label:"Fake Review"},{value:"harassment",label:"Harassment"},{value:"off_topic",label:"Off Topic"},{value:"other",label:"Other"}];var E=({reviewId:e,onFlagSubmitted:s})=>{let{user:t,session:l}=(0,d.a)(),{showToast:i}=(0,m.l)(),[n,c]=(0,r.useState)(!1),[o,x]=(0,r.useState)(""),[h,u]=(0,r.useState)(""),[f,y]=(0,r.useState)(!1),p=async()=>{if(!o){i("Please select a reason for flagging this review","warning");return}if(!t||!l){i("Please log in to flag reviews","error"),c(!1);return}y(!0);try{let t=await fetch(`${g.p2}/reviews/${e}/flag`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l.access_token}`},body:JSON.stringify({reason:o,description:h.trim()||void 0})});if(t.ok)i("Content flagged for review. Thank you!","success"),x(""),u(""),c(!1),s&&s();else{let e=await t.json();i(e.detail||"Failed to flag review. Please try again.","error")}}catch(e){i("Network error. Please check your connection and try again.","error")}finally{y(!1)}};return n?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(M.Z,{className:"w-5 h-5 text-red-600 mr-2"}),(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Flag Review"})]}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Help us maintain a safe and respectful community by reporting inappropriate content."}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Reason for flagging *"}),(0,a.jsxs)("select",{value:o,onChange:e=>x(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[(0,a.jsx)("option",{value:"",children:"Select a reason"}),R.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Additional details (optional)"}),(0,a.jsx)("textarea",{placeholder:"Please provide more details about why you're flagging this review...",value:h,onChange:e=>u(e.target.value),maxLength:500,rows:4,className:"w-full border border-gray-300 rounded-md px-3 py-2"}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[h.length,"/500 characters"]})]}),(0,a.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-3",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)(M.Z,{className:"w-4 h-4 text-yellow-600 mt-0.5 mr-2 flex-shrink-0"}),(0,a.jsxs)("div",{className:"text-sm text-yellow-800",children:[(0,a.jsx)("p",{className:"font-medium mb-1",children:"Before flagging:"}),(0,a.jsxs)("ul",{className:"text-xs space-y-1",children:[(0,a.jsx)("li",{children:"• Only flag content that violates our community guidelines"}),(0,a.jsx)("li",{children:"• Don't flag reviews just because you disagree with them"}),(0,a.jsx)("li",{children:"• False reports may result in restrictions on your account"})]})]})]})})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,a.jsx)("button",{onClick:()=>{x(""),u(""),c(!1)},disabled:f,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded hover:bg-gray-50",children:"Cancel"}),(0,a.jsx)("button",{onClick:p,disabled:f||!o,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50",children:f?"Submitting...":"Submit Flag"})]})]})}):(0,a.jsxs)("button",{onClick:()=>c(!0),className:"inline-flex items-center px-3 py-1 text-sm text-red-600 hover:text-red-700 hover:bg-red-50 rounded border border-red-300",children:[(0,a.jsx)(T.Z,{className:"w-4 h-4 mr-1"}),"Flag"]})};let O=(0,b.Z)("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]),A=(0,b.Z)("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z",key:"s6e0r"}]]);var z=({reviewId:e,initialHelpfulCount:s=0,initialNotHelpfulCount:t=0,userVote:l=null})=>{let{user:i,session:n}=(0,d.a)(),{showToast:c}=(0,m.l)(),[o,x]=(0,r.useState)(s),[h,u]=(0,r.useState)(t),[f,y]=(0,r.useState)(l),[p,b]=(0,r.useState)(!1),v=async s=>{if(!i||!n){c("Please log in to vote on reviews","info");return}b(!0);try{let t=n.access_token,a=await fetch(`${g.CT}/reviews/${e}/vote`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({vote_type:s})});if(a.ok){let e=await a.json();x(e.helpful_count||0),u(e.not_helpful_count||0),y(e.user_vote||null)}else{let e=await a.json();console.error("Vote error:",e),c(e.detail||"Failed to vote. Please try again.","error")}}catch(e){console.error("Network error:",e),c("Network error. Please check your connection and try again.","error")}finally{b(!1)}};return(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Was this review helpful?"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("button",{onClick:()=>v("helpful"),disabled:p,className:`inline-flex items-center px-3 py-1 rounded border transition-colors ${"helpful"===f?"bg-green-100 text-green-700 border-green-300":"text-gray-600 border-gray-300 hover:bg-green-50 hover:text-green-600"} disabled:opacity-50`,children:[(0,a.jsx)(O,{className:"w-4 h-4 mr-1"}),"Yes (",o,")"]}),(0,a.jsxs)("button",{onClick:()=>v("not_helpful"),disabled:p,className:`inline-flex items-center px-3 py-1 rounded border transition-colors ${"not_helpful"===f?"bg-red-100 text-red-700 border-red-300":"text-gray-600 border-gray-300 hover:bg-red-50 hover:text-red-600"} disabled:opacity-50`,children:[(0,a.jsx)(A,{className:"w-4 h-4 mr-1"}),"No (",h,")"]})]})]})};t(88);var D=t(2761),H=t(8267),L=t(185),V=t(3488),B=t(5452),q=t(2126);function Y(){let{id:e}=(0,l.useRouter)().query,{user:s,loading:t}=(0,d.a)(),[i,c]=(0,r.useState)(null),[m,h]=(0,r.useState)([]),[u,f]=(0,r.useState)(!0),[p,b]=(0,r.useState)(!1),[v,j]=(0,r.useState)(null),[w,N]=(0,r.useState)(!1),[_,k]=(0,r.useState)(null);(0,r.useEffect)(()=>{e&&"string"==typeof e&&(S(e),C(e))},[e]);let S=async e=>{try{f(!0),j(null);let s=await x.q.getProfessor(e);c(s)}catch(e){console.error("Failed to fetch professor:",e),j("Failed to load professor information. Please try again.")}finally{f(!1)}},C=async e=>{try{b(!0);let s=await fetch(`${g.CT}/reviews/professor/${e}`);if(s.ok){let e=await s.json();h(e.reviews||[])}}catch(e){console.error("Failed to fetch reviews:",e)}finally{b(!1)}};return u?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading professor information..."})]})}):v||!i?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Professor Not Found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:v||"The professor you are looking for does not exist."}),(0,a.jsx)(o(),{href:"/",className:"text-indigo-600 hover:text-indigo-700",children:"← Back to Search"})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n(),{children:[(0,a.jsxs)("title",{children:[i.name," - RateMyProf India"]}),(0,a.jsx)("meta",{name:"description",content:`Rate and review ${i.name} from ${i.department}`})]}),_&&(0,a.jsx)("div",{className:`fixed top-4 right-4 z-50 px-6 py-3 rounded-lg shadow-lg transition-all duration-300 ${"success"===_.type?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"mr-2",children:"success"===_.type?"✅":"❌"}),_.message,(0,a.jsx)("button",{onClick:()=>k(null),className:"ml-3 text-white hover:text-gray-200",children:"✕"})]})}),(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,a.jsxs)(o(),{href:"/",className:"flex items-center text-gray-600 hover:text-gray-800 mb-4",children:[(0,a.jsx)(D.Z,{className:"w-5 h-5 mr-2"}),"Back to Search"]})})}),(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,a.jsx)("div",{className:"flex items-start justify-between mb-6",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(H.Z,{className:"w-8 h-8 text-indigo-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-1",children:i.name}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(L.Z,{className:"w-4 h-4 mr-1"}),i.department]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(V.Z,{className:"w-4 h-4 mr-1"}),"Vishwakarma University"]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(B.Z,{className:"w-4 h-4 mr-1"}),i.total_reviews," reviews"]})]})]})]})}),(0,a.jsxs)("div",{className:"border-t border-gray-200 pt-6 mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Overall Rating"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:`inline-flex items-center px-4 py-2 rounded-full font-bold text-lg ${(i.average_rating||0)>=4?"bg-green-500 text-white":(i.average_rating||0)>=3?"bg-yellow-500 text-white":"bg-red-500 text-white"}`,children:["★ ",(i.average_rating||0).toFixed(1)]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Based on ",i.total_reviews," review",1!==i.total_reviews?"s":""]})]})]}),i.subjects&&i.subjects.length>0&&(0,a.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center",children:[(0,a.jsx)(y.Z,{className:"w-5 h-5 mr-2"}),"Subjects Taught"]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:i.subjects.map((e,s)=>(0,a.jsx)("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-800 rounded-full text-sm font-medium",children:e},s))})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Student Reviews (",m.length,")"]}),p?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading reviews..."})]}):m.length>0?(0,a.jsx)("div",{className:"space-y-6",children:m.map(e=>(0,a.jsxs)("div",{className:"border-b border-gray-200 pb-6 last:border-b-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:`inline-flex items-center px-3 py-1 rounded-full font-bold text-sm ${e.overall_rating>=4?"bg-green-500 text-white":e.overall_rating>=3?"bg-yellow-500 text-white":"bg-red-500 text-white"}`,children:["★ ",e.overall_rating.toFixed(1)]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[e.course_name&&(0,a.jsx)("span",{className:"font-medium",children:e.course_name}),e.semester&&(0,a.jsxs)("span",{children:[" • ",e.semester]})]})]}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:new Date(e.created_at).toLocaleDateString()})]}),(0,a.jsxs)("div",{className:"space-y-3 mb-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-gray-700 font-medium w-24",children:"Clarity:"}),(0,a.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:`h-full rounded-full transition-all ${e.clarity_rating>=4?"bg-green-500":e.clarity_rating>=3?"bg-yellow-500":"bg-red-500"}`,style:{width:`${e.clarity_rating/5*100}%`}})}),(0,a.jsx)("span",{className:`font-semibold w-8 ${e.clarity_rating>=4?"text-green-600":e.clarity_rating>=3?"text-yellow-600":"text-red-600"}`,children:e.clarity_rating.toFixed(1)})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-gray-700 font-medium w-24",children:"Helpfulness:"}),(0,a.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:`h-full rounded-full transition-all ${e.helpfulness_rating>=4?"bg-green-500":e.helpfulness_rating>=3?"bg-yellow-500":"bg-red-500"}`,style:{width:`${e.helpfulness_rating/5*100}%`}})}),(0,a.jsx)("span",{className:`font-semibold w-8 ${e.helpfulness_rating>=4?"text-green-600":e.helpfulness_rating>=3?"text-yellow-600":"text-red-600"}`,children:e.helpfulness_rating.toFixed(1)})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-gray-700 font-medium w-24",children:"Overall:"}),(0,a.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:`h-full rounded-full transition-all ${e.overall_rating>=4?"bg-green-500":e.overall_rating>=3?"bg-yellow-500":"bg-red-500"}`,style:{width:`${e.overall_rating/5*100}%`}})}),(0,a.jsx)("span",{className:`font-semibold w-8 ${e.overall_rating>=4?"text-green-600":e.overall_rating>=3?"text-yellow-600":"text-red-600"}`,children:e.overall_rating.toFixed(1)})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-gray-700 font-medium w-24",children:"Difficulty:"}),(0,a.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:`h-full rounded-full transition-all ${e.difficulty_rating<=2?"bg-green-500":e.difficulty_rating<=3?"bg-yellow-500":"bg-red-500"}`,style:{width:`${e.difficulty_rating/5*100}%`}})}),(0,a.jsx)("span",{className:`font-semibold w-8 ${e.difficulty_rating<=2?"text-green-600":e.difficulty_rating<=3?"text-yellow-600":"text-red-600"}`,children:e.difficulty_rating.toFixed(1)})]})]})]}),e.review_text&&(0,a.jsx)("div",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg mb-4",children:(0,a.jsxs)("p",{children:['"',e.review_text,'"']})}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100",children:[(0,a.jsx)(z,{reviewId:e.id,initialHelpfulCount:e.helpful_count||0,initialNotHelpfulCount:e.not_helpful_count||0,userVote:e.user_vote||null}),(0,a.jsx)(E,{reviewId:e.id,onFlagSubmitted:()=>{console.log("Review flagged successfully")}})]})]},e.id))}):(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(B.Z,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,a.jsx)("p",{children:"No reviews yet. Be the first to review this professor!"})]})]})]}),(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsx)("div",{className:"sticky top-8",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Rate This Professor"}),!t&&s?w?(0,a.jsx)(F,{professor:i,onCancel:()=>N(!1),onSubmit:()=>{N(!1),e&&"string"==typeof e&&(C(e),S(e)),k({message:"\uD83C\uDF89 Your review has been submitted successfully!",type:"success"}),setTimeout(()=>k(null),5e3)}}):(0,a.jsx)("button",{onClick:()=>N(!0),className:"w-full bg-indigo-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:"Write a Review"}):t?(0,a.jsx)("div",{className:"text-center py-4",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-indigo-600 mx-auto"})}):(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center mb-3",children:[(0,a.jsx)(q.Z,{className:"w-5 h-5 text-gray-400 mr-2"}),(0,a.jsx)("span",{className:"text-gray-600",children:"Sign in to review"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o(),{href:"/auth/login",className:"block w-full bg-indigo-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-indigo-700 text-center",children:"Sign In"}),(0,a.jsx)(o(),{href:"/auth/signup",className:"block w-full border border-indigo-600 text-indigo-600 py-2 px-4 rounded-lg font-medium hover:bg-indigo-50 text-center",children:"Create Account"})]})]})]})})})]})})]})]})}},2184:function(e,s,t){"use strict";t.d(s,{q:function(){return i}});var a=t(7066),r=t(5871);let l=a.Z.create({baseURL:r.CT,timeout:1e4,headers:{"Content-Type":"application/json"}});class i{static async searchProfessors(e={}){try{return(await l.get("/professors",{params:e})).data}catch(e){throw console.error("Error searching professors:",e),e}}static async getProfessor(e){try{return(await l.get(`/professors/${e}`)).data}catch(e){throw console.error("Error fetching professor:",e),e}}static async searchColleges(e={}){try{return(await l.get("/colleges",{params:e})).data}catch(e){throw console.error("Error searching colleges:",e),e}}static async getCollege(e){try{return(await l.get(`/colleges/${e}`)).data}catch(e){throw console.error("Error fetching college:",e),e}}}},1163:function(e,s,t){e.exports=t(3079)}},function(e){e.O(0,[664,464,888,774,179],function(){return e(e.s=9796)}),_N_E=e.O()}]);