(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[195],{9796:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/professors/[id]",function(){return t(4317)}])},4307:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},2126:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},2933:function(e,s,t){"use strict";var a=t(5893),r=t(7294);s.Z=({rating:e,onRatingChange:s,label:t,description:l,error:i})=>{let[n,o]=(0,r.useState)(0),d=[{value:1,label:"Poor"},{value:2,label:"Fair"},{value:3,label:"Good"},{value:4,label:"Very Good"},{value:5,label:"Awesome"}],c=e=>["bg-red-400","bg-orange-400","bg-yellow-400","bg-green-300","bg-green-500"][e-1],m=s=>n>0?s<=n:s<=e,x=s=>{let t=m(s);return e>0&&s<=e?"opacity-100":t?"opacity-70":"opacity-20"},g=n>0?d[n-1]:e>0?d[e-1]:null;return(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t,(0,a.jsx)("span",{className:"text-red-500 ml-1",children:"*"}),l&&(0,a.jsx)("span",{className:"text-gray-500 text-xs block mt-1",children:l})]}),(0,a.jsx)("div",{className:"flex items-center justify-center mb-3",children:(0,a.jsx)("div",{className:"flex items-center rounded-full overflow-hidden shadow-md",onMouseLeave:()=>o(0),children:d.map((e,t)=>(0,a.jsx)("button",{type:"button",onClick:()=>s(e.value),onMouseEnter:()=>o(e.value),className:`
                relative h-14 w-20
                ${c(e.value)}
                ${x(e.value)}
                ${0===t?"rounded-l-full":""}
                ${t===d.length-1?"rounded-r-full":""}
                transition-all duration-300 ease-in-out
                transform hover:scale-105
                focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500
              `,"aria-label":`Rate ${e.value} - ${e.label}`,children:t<d.length-1&&(0,a.jsx)("div",{className:"absolute right-0 top-1/2 transform -translate-y-1/2 w-px h-8 bg-white opacity-30"})},e.value))})}),(0,a.jsx)("div",{className:"text-center",children:g?(0,a.jsxs)("p",{className:"text-sm text-gray-600 font-medium transition-all duration-200",children:[g.value," - ",g.label]}):(0,a.jsx)("p",{className:"text-sm text-gray-400 italic",children:"Select a rating"})}),i&&(0,a.jsx)("p",{className:"text-red-600 text-xs mt-2 text-center",children:i})]})}},4317:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return U}});var a=t(5893),r=t(7294),l=t(1163),i=t(9008),n=t.n(i),o=t(1664),d=t.n(o),c=t(837),m=t(2184),x=t(8844),g=t(3911),h=t(2933),f=t(5871),u=t(4598),p=t(2089),b=t(3346),y=t(3759);let w=(0,y.Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var v=t(2171),j=t(493),N=t(2190);let k=(0,y.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var _=t(4307);let S=(0,y.Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);var C=t(3765);let $=["Sem 1","Sem 2","Sem 3","Sem 4","Sem 5","Sem 6","Sem 7","Sem 8"],P=["2024-25","2023-24","2022-23"],z=["Amazing Lectures","Tough Grader","Caring","Clear Explanations","Helpful","Inspiring","Fair Testing","Good Feedback","Approachable","Expert Knowledge"];function F({professor:e,onCancel:s,onSubmit:t}){let{user:l}=(0,c.a)(),{showToast:i}=(0,x.l)(),[n,o]=(0,r.useState)(1),[m,y]=(0,r.useState)(!1),[F,Z]=(0,r.useState)(!1),[T,D]=(0,r.useState)(!1),[R,E]=(0,r.useState)({professor_id:e.id,course_name:"",semester:"",academic_year:P[0],overall_rating:0,difficulty_rating:0,clarity_rating:0,helpfulness_rating:0,attendance_mandatory:null,assignment_load:"moderate",review_text:"",tags:[]}),[O,A]=(0,r.useState)({}),M=e=>{let s={};switch(e){case 1:R.course_name||(s.course_name="Please enter a course name"),R.semester||(s.semester="Please select semester"),R.academic_year||(s.academic_year="Please select academic year");break;case 2:0===R.overall_rating&&(s.overall_rating="Please provide overall rating"),0===R.difficulty_rating&&(s.difficulty_rating="Please rate difficulty"),0===R.clarity_rating&&(s.clarity_rating="Please rate teaching clarity"),0===R.helpfulness_rating&&(s.helpfulness_rating="Please rate helpfulness");break;case 3:break;case 4:R.review_text.trim().length<50&&(s.review_text="Please write at least 50 characters"),R.review_text.trim().length>1e3&&(s.review_text="Review must be less than 1000 characters")}return A(s),0===Object.keys(s).length},L=async()=>{if(M(4)){y(!0);try{let s={professor_id:e.id,ratings:{clarity:R.clarity_rating||1,helpfulness:R.helpfulness_rating||1,workload:6-(R.difficulty_rating||1),engagement:R.overall_rating||1},review_text:R.review_text?.trim()||null,semester_taken:R.semester||null,course_taken:R.course_name||null},{data:{session:a}}=await g.OQ.auth.getSession();if(!a)throw Error("No authentication session found");let r=await fetch(`${f.CT}/reviews`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a.access_token}`},body:JSON.stringify(s)});if(!r.ok){let e=await r.json();if(409===r.status){Z(!0);return}throw Error(e.detail||"Failed to submit review")}let l=await r.json();console.log("Review submitted successfully:",l),i("Review submitted successfully!","success"),t(R)}catch(e){console.error("Failed to submit review:",e),i(e instanceof Error?e.message:"Failed to submit review. Please try again.","error")}finally{y(!1)}}},H=(e,s,t,r,l)=>(0,a.jsx)(h.Z,{rating:e,onRatingChange:s,label:t,description:r,error:l?O[l]:void 0});return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("div",{className:"flex space-x-2",children:[1,2,3,4].map(e=>(0,a.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-medium ${e===n?"bg-indigo-600 text-white":e<n?"bg-green-600 text-white":"bg-gray-200 text-gray-600"}`,children:e<n?(0,a.jsx)(j.Z,{className:"w-4 h-4"}):e},e))}),(0,a.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(N.Z,{className:"w-5 h-5"})})]}),(0,a.jsx)("div",{className:"min-h-[400px]",children:(()=>{switch(n){case 1:return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Review Settings & Course Information"}),(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)(u.Z,{className:"w-5 h-5 text-blue-600 mr-3 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-blue-900",children:"\uD83D\uDD12 All reviews are anonymous by default"}),(0,a.jsx)("p",{className:"text-xs text-blue-700 mt-1",children:'Your identity will never be publicly displayed. Only administrators can see review authors for moderation purposes. All reviews show as "Verified Student".'})]})]})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4 inline mr-1"}),"Course/Subject Name"]}),(0,a.jsx)("input",{type:"text",value:R.course_name,onChange:e=>E({...R,course_name:e.target.value}),placeholder:"Enter course name (e.g., Data Structures, Machine Learning, etc.)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),O.course_name&&(0,a.jsx)("p",{className:"text-red-600 text-xs mt-1",children:O.course_name}),e.subjects&&e.subjects.length>0&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Popular subjects for this professor:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.subjects.map((e,s)=>(0,a.jsx)("button",{type:"button",onClick:()=>E({...R,course_name:e}),className:"text-xs px-2 py-1 bg-indigo-100 text-indigo-700 rounded-full hover:bg-indigo-200 transition-colors",children:e},s))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Semester Taken"}),(0,a.jsxs)("select",{value:R.semester,onChange:e=>E({...R,semester:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"",children:"Select semester"}),$.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),O.semester&&(0,a.jsx)("p",{className:"text-red-600 text-xs mt-1",children:O.semester})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,a.jsx)(b.Z,{className:"w-4 h-4 inline mr-1"}),"Academic Year"]}),(0,a.jsx)("select",{value:R.academic_year,onChange:e=>E({...R,academic_year:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:P.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]})]});case 2:return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Rate the Professor"}),H(R.overall_rating,e=>E({...R,overall_rating:e}),"Overall Rating","Your overall experience with this professor","overall_rating"),H(R.difficulty_rating,e=>E({...R,difficulty_rating:e}),"Difficulty Level","1 = Very Easy, 5 = Bohot (Very) Hard","difficulty_rating"),H(R.clarity_rating,e=>E({...R,clarity_rating:e}),"Teaching Clarity","How clear and understandable were the explanations?","clarity_rating"),H(R.helpfulness_rating,e=>E({...R,helpfulness_rating:e}),"Helpfulness","How willing and helpful was the professor outside class?","helpfulness_rating")]});case 3:return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Course Experience"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Was attendance mandatory?"}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",value:"true",checked:!0===R.attendance_mandatory,onChange:()=>E({...R,attendance_mandatory:!0}),className:"mr-2 text-indigo-600 focus:ring-indigo-500"}),"Yes"]}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",value:"false",checked:!1===R.attendance_mandatory,onChange:()=>E({...R,attendance_mandatory:!1}),className:"mr-2 text-indigo-600 focus:ring-indigo-500"}),"No"]}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",value:"null",checked:null===R.attendance_mandatory,onChange:()=>E({...R,attendance_mandatory:null}),className:"mr-2 text-indigo-600 focus:ring-indigo-500"}),"Optional/Mixed"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assignment/Workload"}),(0,a.jsx)("div",{className:"flex space-x-4",children:["light","moderate","heavy"].map(e=>(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",value:e,checked:R.assignment_load===e,onChange:()=>E({...R,assignment_load:e}),className:"mr-2 text-indigo-600 focus:ring-indigo-500"}),e.charAt(0).toUpperCase()+e.slice(1)]},e))})]})]});case 4:return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Written Review & Tags"}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg overflow-hidden",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>D(!T),className:"w-full flex items-center justify-between p-4 text-left hover:bg-blue-100 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(u.Z,{className:"w-5 h-5 text-blue-600 mr-2"}),(0,a.jsx)("span",{className:"font-medium text-blue-900",children:"Guidelines"})]}),T?(0,a.jsx)(w,{className:"w-5 h-5 text-blue-600"}):(0,a.jsx)(v.Z,{className:"w-5 h-5 text-blue-600"})]}),T&&(0,a.jsxs)("div",{className:"px-4 pb-4 space-y-2",children:[(0,a.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1.5",children:[(0,a.jsx)("li",{children:"• Your rating could be removed if you use profanity or derogatory terms."}),(0,a.jsx)("li",{children:"• Don't claim that the professor shows bias or favoritism for or against students."}),(0,a.jsx)("li",{children:"• Don't forget to proof read!"})]}),(0,a.jsx)(d(),{href:"/guidelines",target:"_blank",className:"inline-flex items-center text-sm font-medium text-blue-600 hover:text-blue-800 underline",children:"View all guidelines"})]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Discuss the professor's professional abilities including teaching style and ability to convey the material clearly"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Your Review",(0,a.jsx)("span",{className:"text-gray-500 text-xs block",children:"Share your experience to help fellow students (50-1000 characters)"})]}),(0,a.jsx)("textarea",{value:R.review_text,onChange:e=>E({...R,review_text:e.target.value}),rows:5,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none",placeholder:"Describe your experience with this professor. How were the lectures? Was the professor helpful? Any tips for future students?"}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,a.jsxs)("span",{children:[R.review_text.length,"/1000 characters"]}),(0,a.jsx)("span",{children:R.review_text.length<50?`${50-R.review_text.length} more needed`:""})]}),O.review_text&&(0,a.jsx)("p",{className:"text-red-600 text-xs mt-1",children:O.review_text})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Quick Tags (Optional)",(0,a.jsx)("span",{className:"text-gray-500 text-xs block",children:"Select tags that describe this professor"})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:z.map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>{let s=R.tags.includes(e)?R.tags.filter(s=>s!==e):[...R.tags,e];E({...R,tags:s})},className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${R.tags.includes(e)?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:e},e))})]})]});default:return null}})()}),(0,a.jsxs)("div",{className:"flex justify-between pt-4 border-t border-gray-200",children:[(0,a.jsxs)("button",{onClick:()=>{o(n-1),A({})},disabled:1===n,className:"flex items-center px-4 py-2 text-gray-600 disabled:text-gray-400 hover:text-gray-800 disabled:cursor-not-allowed",children:[(0,a.jsx)(k,{className:"w-4 h-4 mr-1"}),"Previous"]}),n<4?(0,a.jsxs)("button",{onClick:()=>{M(n)&&o(n+1)},className:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:["Next",(0,a.jsx)(_.Z,{className:"w-4 h-4 ml-1"})]}):(0,a.jsx)("button",{onClick:L,disabled:m,className:"flex items-center px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50",children:m?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Submitting..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S,{className:"w-4 h-4 mr-2"}),"Submit Review"]})})]}),F&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4 shadow-xl",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(C.Z,{className:"h-6 w-6 text-amber-500 mr-3"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Already Reviewed"})]}),(0,a.jsxs)("p",{className:"text-gray-600 mb-6",children:["You've already submitted a review for ",(0,a.jsx)("strong",{children:e.name}),". Each user can only review a professor once to maintain authenticity."]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,a.jsx)("button",{onClick:()=>{Z(!1),window.location.href="/my-reviews"},className:"flex-1 bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 transition-colors",children:"View My Reviews"}),(0,a.jsx)("button",{onClick:()=>Z(!1),className:"flex-1 bg-gray-100 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-200 transition-colors",children:"Close"})]})]})})]})}var Z=t(4795),T=t(9200);let D=[{value:"inappropriate_content",label:"Inappropriate Content"},{value:"spam",label:"Spam"},{value:"fake_review",label:"Fake Review"},{value:"harassment",label:"Harassment"},{value:"off_topic",label:"Off Topic"},{value:"other",label:"Other"}];var R=({reviewId:e,onFlagSubmitted:s})=>{let{user:t,session:l}=(0,c.a)(),{showToast:i}=(0,x.l)(),[n,o]=(0,r.useState)(!1),[d,m]=(0,r.useState)(""),[g,h]=(0,r.useState)(""),[u,p]=(0,r.useState)(!1),b=async()=>{if(!d){i("Please select a reason for flagging this review","warning");return}if(!t||!l){i("Please log in to flag reviews","error"),o(!1);return}p(!0);try{let t=await fetch(`${f.p2}/reviews/${e}/flag`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l.access_token}`},body:JSON.stringify({reason:d,description:g.trim()||void 0})});if(t.ok)i("Content flagged for review. Thank you!","success"),m(""),h(""),o(!1),s&&s();else{let e=await t.json();i(e.detail||"Failed to flag review. Please try again.","error")}}catch(e){i("Network error. Please check your connection and try again.","error")}finally{p(!1)}};return n?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(T.Z,{className:"w-5 h-5 text-red-600 mr-2"}),(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Flag Review"})]}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Help us maintain a safe and respectful community by reporting inappropriate content."}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Reason for flagging *"}),(0,a.jsxs)("select",{value:d,onChange:e=>m(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[(0,a.jsx)("option",{value:"",children:"Select a reason"}),D.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Additional details (optional)"}),(0,a.jsx)("textarea",{placeholder:"Please provide more details about why you're flagging this review...",value:g,onChange:e=>h(e.target.value),maxLength:500,rows:4,className:"w-full border border-gray-300 rounded-md px-3 py-2"}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[g.length,"/500 characters"]})]}),(0,a.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-3",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)(T.Z,{className:"w-4 h-4 text-yellow-600 mt-0.5 mr-2 flex-shrink-0"}),(0,a.jsxs)("div",{className:"text-sm text-yellow-800",children:[(0,a.jsx)("p",{className:"font-medium mb-1",children:"Before flagging:"}),(0,a.jsxs)("ul",{className:"text-xs space-y-1",children:[(0,a.jsx)("li",{children:"• Only flag content that violates our community guidelines"}),(0,a.jsx)("li",{children:"• Don't flag reviews just because you disagree with them"}),(0,a.jsx)("li",{children:"• False reports may result in restrictions on your account"})]})]})]})})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,a.jsx)("button",{onClick:()=>{m(""),h(""),o(!1)},disabled:u,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded hover:bg-gray-50",children:"Cancel"}),(0,a.jsx)("button",{onClick:b,disabled:u||!d,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50",children:u?"Submitting...":"Submit Flag"})]})]})}):(0,a.jsxs)("button",{onClick:()=>o(!0),className:"inline-flex items-center px-3 py-1 text-sm text-red-600 hover:text-red-700 hover:bg-red-50 rounded border border-red-300",children:[(0,a.jsx)(Z.Z,{className:"w-4 h-4 mr-1"}),"Flag"]})},E=t(9),O=t.n(E),A=t(2099),M=t(9683),L=({reviewId:e,initialHelpfulCount:s=0,initialNotHelpfulCount:t=0,userVote:l=null})=>{let{user:i,session:n}=(0,c.a)(),{showToast:o}=(0,x.l)(),[d,m]=(0,r.useState)(s),[g,h]=(0,r.useState)(t),[u,p]=(0,r.useState)(l),[b,y]=(0,r.useState)(!1),[w,v]=(0,r.useState)(null),j=async s=>{if(!i||!n){o("Please log in to vote on reviews","info");return}if(!b){v(s),setTimeout(()=>v(null),500),u===s?(p(null),"helpful"===s?m(e=>Math.max(0,e-1)):h(e=>Math.max(0,e-1))):(p(s),"helpful"===u?(m(e=>Math.max(0,e-1)),h(e=>e+1)):"not_helpful"===u?(h(e=>Math.max(0,e-1)),m(e=>e+1)):"helpful"===s?m(e=>e+1):h(e=>e+1)),y(!0);try{let t=n.access_token,a=await fetch(`${f.CT}/reviews/${e}/vote`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({vote_type:s})});if(a.ok){let e=await a.json();m(e.helpful_count||0),h(e.not_helpful_count||0),p(e.user_vote||null)}else{p(u),m(d),h(g);let e=await a.json();console.error("Vote error:",e),o(e.detail||"Failed to vote. Please try again.","error")}}catch(e){p(u),m(d),h(g),console.error("Network error:",e),o("Network error. Please check your connection and try again.","error")}finally{y(!1)}}};return(0,a.jsxs)("div",{className:"jsx-d50bfabeab9055b9 flex items-center space-x-4 text-sm",children:[(0,a.jsx)("span",{className:"jsx-d50bfabeab9055b9 text-gray-600",children:"Was this review helpful?"}),(0,a.jsxs)("div",{className:"jsx-d50bfabeab9055b9 flex items-center space-x-2",children:[(0,a.jsxs)("button",{onClick:()=>j("helpful"),disabled:b,className:`jsx-d50bfabeab9055b9 inline-flex items-center px-3 py-1 rounded border transition-all duration-200 relative ${"helpful"===u?"bg-green-100 text-green-700 border-green-300":"text-gray-600 border-gray-300 hover:bg-green-50 hover:text-green-600"} disabled:opacity-50`,children:[(0,a.jsx)(A.Z,{className:`w-4 h-4 mr-1 transition-all duration-300 ${"helpful"===w?"animate-upvote-pop":""}`}),"Yes (",d,")"]}),(0,a.jsxs)("button",{onClick:()=>j("not_helpful"),disabled:b,className:`jsx-d50bfabeab9055b9 inline-flex items-center px-3 py-1 rounded border transition-all duration-200 relative ${"not_helpful"===u?"bg-red-100 text-red-700 border-red-300":"text-gray-600 border-gray-300 hover:bg-red-50 hover:text-red-600"} disabled:opacity-50`,children:[(0,a.jsx)(M.Z,{className:`w-4 h-4 mr-1 transition-all duration-300 ${"not_helpful"===w?"animate-downvote-shake":""}`}),"No (",g,")"]})]}),(0,a.jsx)(O(),{id:"d50bfabeab9055b9",children:"@-webkit-keyframes upvote-pop{0%{-webkit-transform:scale(1)translatey(0);transform:scale(1)translatey(0);-webkit-filter:drop-shadow(0 0 0 rgba(34,197,94,0));filter:drop-shadow(0 0 0 rgba(34,197,94,0))}25%{-webkit-transform:scale(1.3)translatey(-4px);transform:scale(1.3)translatey(-4px);-webkit-filter:drop-shadow(0 0 8px rgba(34,197,94,.8));filter:drop-shadow(0 0 8px rgba(34,197,94,.8))}50%{-webkit-transform:scale(1.4)translatey(-6px);transform:scale(1.4)translatey(-6px);-webkit-filter:drop-shadow(0 2px 12px rgba(34,197,94,1));filter:drop-shadow(0 2px 12px rgba(34,197,94,1))}75%{-webkit-transform:scale(1.1)translatey(-2px);transform:scale(1.1)translatey(-2px);-webkit-filter:drop-shadow(0 0 6px rgba(34,197,94,.6));filter:drop-shadow(0 0 6px rgba(34,197,94,.6))}100%{-webkit-transform:scale(1)translatey(0);transform:scale(1)translatey(0);-webkit-filter:drop-shadow(0 0 0 rgba(34,197,94,0));filter:drop-shadow(0 0 0 rgba(34,197,94,0))}}@-moz-keyframes upvote-pop{0%{-moz-transform:scale(1)translatey(0);transform:scale(1)translatey(0);filter:drop-shadow(0 0 0 rgba(34,197,94,0))}25%{-moz-transform:scale(1.3)translatey(-4px);transform:scale(1.3)translatey(-4px);filter:drop-shadow(0 0 8px rgba(34,197,94,.8))}50%{-moz-transform:scale(1.4)translatey(-6px);transform:scale(1.4)translatey(-6px);filter:drop-shadow(0 2px 12px rgba(34,197,94,1))}75%{-moz-transform:scale(1.1)translatey(-2px);transform:scale(1.1)translatey(-2px);filter:drop-shadow(0 0 6px rgba(34,197,94,.6))}100%{-moz-transform:scale(1)translatey(0);transform:scale(1)translatey(0);filter:drop-shadow(0 0 0 rgba(34,197,94,0))}}@-o-keyframes upvote-pop{0%{-o-transform:scale(1)translatey(0);transform:scale(1)translatey(0);filter:drop-shadow(0 0 0 rgba(34,197,94,0))}25%{-o-transform:scale(1.3)translatey(-4px);transform:scale(1.3)translatey(-4px);filter:drop-shadow(0 0 8px rgba(34,197,94,.8))}50%{-o-transform:scale(1.4)translatey(-6px);transform:scale(1.4)translatey(-6px);filter:drop-shadow(0 2px 12px rgba(34,197,94,1))}75%{-o-transform:scale(1.1)translatey(-2px);transform:scale(1.1)translatey(-2px);filter:drop-shadow(0 0 6px rgba(34,197,94,.6))}100%{-o-transform:scale(1)translatey(0);transform:scale(1)translatey(0);filter:drop-shadow(0 0 0 rgba(34,197,94,0))}}@keyframes upvote-pop{0%{-webkit-transform:scale(1)translatey(0);-moz-transform:scale(1)translatey(0);-o-transform:scale(1)translatey(0);transform:scale(1)translatey(0);-webkit-filter:drop-shadow(0 0 0 rgba(34,197,94,0));filter:drop-shadow(0 0 0 rgba(34,197,94,0))}25%{-webkit-transform:scale(1.3)translatey(-4px);-moz-transform:scale(1.3)translatey(-4px);-o-transform:scale(1.3)translatey(-4px);transform:scale(1.3)translatey(-4px);-webkit-filter:drop-shadow(0 0 8px rgba(34,197,94,.8));filter:drop-shadow(0 0 8px rgba(34,197,94,.8))}50%{-webkit-transform:scale(1.4)translatey(-6px);-moz-transform:scale(1.4)translatey(-6px);-o-transform:scale(1.4)translatey(-6px);transform:scale(1.4)translatey(-6px);-webkit-filter:drop-shadow(0 2px 12px rgba(34,197,94,1));filter:drop-shadow(0 2px 12px rgba(34,197,94,1))}75%{-webkit-transform:scale(1.1)translatey(-2px);-moz-transform:scale(1.1)translatey(-2px);-o-transform:scale(1.1)translatey(-2px);transform:scale(1.1)translatey(-2px);-webkit-filter:drop-shadow(0 0 6px rgba(34,197,94,.6));filter:drop-shadow(0 0 6px rgba(34,197,94,.6))}100%{-webkit-transform:scale(1)translatey(0);-moz-transform:scale(1)translatey(0);-o-transform:scale(1)translatey(0);transform:scale(1)translatey(0);-webkit-filter:drop-shadow(0 0 0 rgba(34,197,94,0));filter:drop-shadow(0 0 0 rgba(34,197,94,0))}}@-webkit-keyframes downvote-shake{0%{-webkit-transform:scale(1)rotate(0deg);transform:scale(1)rotate(0deg);-webkit-filter:drop-shadow(0 0 0 rgba(239,68,68,0));filter:drop-shadow(0 0 0 rgba(239,68,68,0))}15%{-webkit-transform:scale(1.2)rotate(-5deg);transform:scale(1.2)rotate(-5deg);-webkit-filter:drop-shadow(0 0 8px rgba(239,68,68,.8));filter:drop-shadow(0 0 8px rgba(239,68,68,.8))}30%{-webkit-transform:scale(1.3)rotate(5deg);transform:scale(1.3)rotate(5deg);-webkit-filter:drop-shadow(0 2px 10px rgba(239,68,68,1));filter:drop-shadow(0 2px 10px rgba(239,68,68,1))}45%{-webkit-transform:scale(1.2)rotate(-3deg);transform:scale(1.2)rotate(-3deg);-webkit-filter:drop-shadow(0 0 8px rgba(239,68,68,.8));filter:drop-shadow(0 0 8px rgba(239,68,68,.8))}60%{-webkit-transform:scale(1.1)rotate(2deg);transform:scale(1.1)rotate(2deg);-webkit-filter:drop-shadow(0 0 6px rgba(239,68,68,.6));filter:drop-shadow(0 0 6px rgba(239,68,68,.6))}75%{-webkit-transform:scale(1.05)rotate(-1deg);transform:scale(1.05)rotate(-1deg);-webkit-filter:drop-shadow(0 0 4px rgba(239,68,68,.4));filter:drop-shadow(0 0 4px rgba(239,68,68,.4))}100%{-webkit-transform:scale(1)rotate(0deg);transform:scale(1)rotate(0deg);-webkit-filter:drop-shadow(0 0 0 rgba(239,68,68,0));filter:drop-shadow(0 0 0 rgba(239,68,68,0))}}@-moz-keyframes downvote-shake{0%{-moz-transform:scale(1)rotate(0deg);transform:scale(1)rotate(0deg);filter:drop-shadow(0 0 0 rgba(239,68,68,0))}15%{-moz-transform:scale(1.2)rotate(-5deg);transform:scale(1.2)rotate(-5deg);filter:drop-shadow(0 0 8px rgba(239,68,68,.8))}30%{-moz-transform:scale(1.3)rotate(5deg);transform:scale(1.3)rotate(5deg);filter:drop-shadow(0 2px 10px rgba(239,68,68,1))}45%{-moz-transform:scale(1.2)rotate(-3deg);transform:scale(1.2)rotate(-3deg);filter:drop-shadow(0 0 8px rgba(239,68,68,.8))}60%{-moz-transform:scale(1.1)rotate(2deg);transform:scale(1.1)rotate(2deg);filter:drop-shadow(0 0 6px rgba(239,68,68,.6))}75%{-moz-transform:scale(1.05)rotate(-1deg);transform:scale(1.05)rotate(-1deg);filter:drop-shadow(0 0 4px rgba(239,68,68,.4))}100%{-moz-transform:scale(1)rotate(0deg);transform:scale(1)rotate(0deg);filter:drop-shadow(0 0 0 rgba(239,68,68,0))}}@-o-keyframes downvote-shake{0%{-o-transform:scale(1)rotate(0deg);transform:scale(1)rotate(0deg);filter:drop-shadow(0 0 0 rgba(239,68,68,0))}15%{-o-transform:scale(1.2)rotate(-5deg);transform:scale(1.2)rotate(-5deg);filter:drop-shadow(0 0 8px rgba(239,68,68,.8))}30%{-o-transform:scale(1.3)rotate(5deg);transform:scale(1.3)rotate(5deg);filter:drop-shadow(0 2px 10px rgba(239,68,68,1))}45%{-o-transform:scale(1.2)rotate(-3deg);transform:scale(1.2)rotate(-3deg);filter:drop-shadow(0 0 8px rgba(239,68,68,.8))}60%{-o-transform:scale(1.1)rotate(2deg);transform:scale(1.1)rotate(2deg);filter:drop-shadow(0 0 6px rgba(239,68,68,.6))}75%{-o-transform:scale(1.05)rotate(-1deg);transform:scale(1.05)rotate(-1deg);filter:drop-shadow(0 0 4px rgba(239,68,68,.4))}100%{-o-transform:scale(1)rotate(0deg);transform:scale(1)rotate(0deg);filter:drop-shadow(0 0 0 rgba(239,68,68,0))}}@keyframes downvote-shake{0%{-webkit-transform:scale(1)rotate(0deg);-moz-transform:scale(1)rotate(0deg);-o-transform:scale(1)rotate(0deg);transform:scale(1)rotate(0deg);-webkit-filter:drop-shadow(0 0 0 rgba(239,68,68,0));filter:drop-shadow(0 0 0 rgba(239,68,68,0))}15%{-webkit-transform:scale(1.2)rotate(-5deg);-moz-transform:scale(1.2)rotate(-5deg);-o-transform:scale(1.2)rotate(-5deg);transform:scale(1.2)rotate(-5deg);-webkit-filter:drop-shadow(0 0 8px rgba(239,68,68,.8));filter:drop-shadow(0 0 8px rgba(239,68,68,.8))}30%{-webkit-transform:scale(1.3)rotate(5deg);-moz-transform:scale(1.3)rotate(5deg);-o-transform:scale(1.3)rotate(5deg);transform:scale(1.3)rotate(5deg);-webkit-filter:drop-shadow(0 2px 10px rgba(239,68,68,1));filter:drop-shadow(0 2px 10px rgba(239,68,68,1))}45%{-webkit-transform:scale(1.2)rotate(-3deg);-moz-transform:scale(1.2)rotate(-3deg);-o-transform:scale(1.2)rotate(-3deg);transform:scale(1.2)rotate(-3deg);-webkit-filter:drop-shadow(0 0 8px rgba(239,68,68,.8));filter:drop-shadow(0 0 8px rgba(239,68,68,.8))}60%{-webkit-transform:scale(1.1)rotate(2deg);-moz-transform:scale(1.1)rotate(2deg);-o-transform:scale(1.1)rotate(2deg);transform:scale(1.1)rotate(2deg);-webkit-filter:drop-shadow(0 0 6px rgba(239,68,68,.6));filter:drop-shadow(0 0 6px rgba(239,68,68,.6))}75%{-webkit-transform:scale(1.05)rotate(-1deg);-moz-transform:scale(1.05)rotate(-1deg);-o-transform:scale(1.05)rotate(-1deg);transform:scale(1.05)rotate(-1deg);-webkit-filter:drop-shadow(0 0 4px rgba(239,68,68,.4));filter:drop-shadow(0 0 4px rgba(239,68,68,.4))}100%{-webkit-transform:scale(1)rotate(0deg);-moz-transform:scale(1)rotate(0deg);-o-transform:scale(1)rotate(0deg);transform:scale(1)rotate(0deg);-webkit-filter:drop-shadow(0 0 0 rgba(239,68,68,0));filter:drop-shadow(0 0 0 rgba(239,68,68,0))}}.animate-upvote-pop.jsx-d50bfabeab9055b9{-webkit-animation:upvote-pop.5s ease-out;-moz-animation:upvote-pop.5s ease-out;-o-animation:upvote-pop.5s ease-out;animation:upvote-pop.5s ease-out}.animate-downvote-shake.jsx-d50bfabeab9055b9{-webkit-animation:downvote-shake.5s ease-in-out;-moz-animation:downvote-shake.5s ease-in-out;-o-animation:downvote-shake.5s ease-in-out;animation:downvote-shake.5s ease-in-out}"})]})},H=t(6127);function V({currentProfessorId:e,currentProfessorName:s,onClose:t}){let[l,i]=(0,r.useState)(""),[n,o]=(0,r.useState)([]),[d,c]=(0,r.useState)([e]),[m,x]=(0,r.useState)([]),[g,h]=(0,r.useState)(!1),[u,p]=(0,r.useState)(!1),b=async s=>{if(!s.trim()){o([]);return}p(!0);try{let t=await fetch(`${f.CT}/professors?q=${encodeURIComponent(s)}&limit=10`);if(t.ok){let s=((await t.json()).professors||[]).filter(s=>s.id!==e&&!d.includes(s.id));o(s)}else o([])}catch(e){console.error("Search failed:",e),o([])}finally{p(!1)}};(0,r.useEffect)(()=>{let e=setTimeout(()=>{b(l)},300);return()=>clearTimeout(e)},[l,d]);let y=e=>{if(d.length>=2){alert("You can only compare with one other professor");return}d.includes(e)||(c([...d,e]),i(""),o([]))},w=s=>{s!==e&&c(d.filter(e=>e!==s))};(0,r.useEffect)(()=>{d.length>=2?v():x([])},[d]);let v=async()=>{h(!0);try{let e=await fetch(`${f.CT}/professors/compare?ids=${d.join(",")}`);if(e.ok){let s=await e.json();x(s.professors)}else console.error("Compare API error:",e.status)}catch(e){console.error("Failed to fetch comparison data:",e)}finally{h(!1)}},j=e=>e>=4?"bg-green-500":e>=3?"bg-yellow-500":"bg-red-500",k=e=>e>=4?"text-green-600":e>=3?"text-yellow-600":"text-red-600";return(0,a.jsxs)("div",{className:"max-h-[85vh] overflow-y-auto",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Compare Professors"})}),m.length<2&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search for a Professor to Compare With"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(H.Z,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsx)("input",{type:"text",value:l,onChange:e=>i(e.target.value),placeholder:"Search for professors...",className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",disabled:d.length>=2})]}),n.length>0&&(0,a.jsx)("div",{className:"mt-2 bg-white border-2 border-indigo-200 rounded-lg shadow-xl max-h-60 overflow-auto",children:n.map(e=>(0,a.jsxs)("button",{onClick:()=>y(e.id),className:"w-full px-4 py-3 text-left hover:bg-indigo-50 border-b border-gray-100 last:border-b-0 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold text-gray-900",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:e.department})]}),(0,a.jsx)("div",{className:`ml-4 px-3 py-1 rounded-full font-bold text-sm text-white ${j(e.average_rating||0)}`,children:(e.average_rating||0).toFixed(1)})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[e.total_reviews||0," reviews"]})]},e.id))}),u&&(0,a.jsx)("div",{className:"mt-2 text-sm text-indigo-600 font-medium",children:"\uD83D\uDD0D Searching..."}),l.trim()&&!u&&0===n.length&&(0,a.jsxs)("div",{className:"mt-2 text-sm text-gray-500 p-3 bg-gray-50 rounded-lg",children:['No professors found matching "',l,'"']})]}),m.length>0&&(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:m.map(s=>(0,a.jsxs)("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-sm",children:[(0,a.jsx)("span",{children:s.name}),s.id!==e&&(0,a.jsx)("button",{onClick:()=>w(s.id),className:"hover:text-indigo-900",children:(0,a.jsx)(N.Z,{className:"w-4 h-4"})})]},s.id))})}),g?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading comparison..."})]}):m.length>=2?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"grid grid-cols-2 gap-6",children:m.map(e=>(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 text-center",children:[(0,a.jsxs)("div",{className:`inline-flex items-center px-6 py-3 rounded-full font-bold text-2xl mb-4 text-white ${j(e.average_rating)}`,children:["★ ",e.average_rating.toFixed(1)]}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.department}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.college_name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Based on ",e.total_reviews," review",1!==e.total_reviews?"s":""]})]},e.id))}),(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 space-y-4",children:[m.map((e,s)=>(0,a.jsxs)("div",{children:[0===s&&(0,a.jsx)("div",{className:"mb-2 text-sm font-semibold text-gray-700",children:"Clarity:"}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:`h-full rounded-full transition-all ${j(e.ratings_breakdown.clarity)}`,style:{width:`${e.ratings_breakdown.clarity/5*100}%`}})}),(0,a.jsx)("span",{className:`font-semibold w-12 ${k(e.ratings_breakdown.clarity)}`,children:e.ratings_breakdown.clarity.toFixed(1)})]}),(0,a.jsx)("span",{className:"text-xs text-gray-500 w-32 text-right",children:e.name})]})]},`clarity-${e.id}`)),m.map((e,s)=>(0,a.jsxs)("div",{children:[0===s&&(0,a.jsx)("div",{className:"mb-2 text-sm font-semibold text-gray-700 mt-4",children:"Helpfulness:"}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:`h-full rounded-full transition-all ${j(e.ratings_breakdown.helpfulness)}`,style:{width:`${e.ratings_breakdown.helpfulness/5*100}%`}})}),(0,a.jsx)("span",{className:`font-semibold w-12 ${k(e.ratings_breakdown.helpfulness)}`,children:e.ratings_breakdown.helpfulness.toFixed(1)})]}),(0,a.jsx)("span",{className:"text-xs text-gray-500 w-32 text-right",children:e.name})]})]},`helpfulness-${e.id}`)),m.map((e,s)=>(0,a.jsxs)("div",{children:[0===s&&(0,a.jsx)("div",{className:"mb-2 text-sm font-semibold text-gray-700 mt-4",children:"Overall:"}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:`h-full rounded-full transition-all ${j(e.ratings_breakdown.overall)}`,style:{width:`${e.ratings_breakdown.overall/5*100}%`}})}),(0,a.jsx)("span",{className:`font-semibold w-12 ${k(e.ratings_breakdown.overall)}`,children:e.ratings_breakdown.overall.toFixed(1)})]}),(0,a.jsx)("span",{className:"text-xs text-gray-500 w-32 text-right",children:e.name})]})]},`overall-${e.id}`)),m.map((e,s)=>(0,a.jsxs)("div",{children:[0===s&&(0,a.jsx)("div",{className:"mb-2 text-sm font-semibold text-gray-700 mt-4",children:"Difficulty:"}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:`h-full rounded-full transition-all ${j(5-e.ratings_breakdown.difficulty)}`,style:{width:`${e.ratings_breakdown.difficulty/5*100}%`}})}),(0,a.jsx)("span",{className:`font-semibold w-12 ${k(5-e.ratings_breakdown.difficulty)}`,children:e.ratings_breakdown.difficulty.toFixed(1)})]}),(0,a.jsx)("span",{className:"text-xs text-gray-500 w-32 text-right",children:e.name})]})]},`difficulty-${e.id}`))]})]}):(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500 bg-gray-50 rounded-lg",children:[(0,a.jsx)(H.Z,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),(0,a.jsxs)("p",{children:["Search and select a professor to compare with ",(0,a.jsx)("strong",{children:s})]})]})]})}t(88);var Y=t(2761),B=t(8267),I=t(185),q=t(3488),W=t(5452),G=t(2126);function U(){let{id:e}=(0,l.useRouter)().query,{user:s,loading:t}=(0,c.a)(),[i,o]=(0,r.useState)(null),[x,g]=(0,r.useState)([]),[h,u]=(0,r.useState)([]),[b,y]=(0,r.useState)([]),[w,v]=(0,r.useState)(!0),[j,N]=(0,r.useState)(!1),[k,_]=(0,r.useState)(null),[S,C]=(0,r.useState)(!1),[$,P]=(0,r.useState)(null),[z,Z]=(0,r.useState)(!1);(0,r.useEffect)(()=>{e&&"string"==typeof e&&(T(e),D(e),E(e))},[e]),(0,r.useEffect)(()=>{i&&e&&"string"==typeof e&&O(e)},[i,e]);let T=async e=>{try{v(!0),_(null);let s=await m.q.getProfessor(e);o(s)}catch(e){console.error("Failed to fetch professor:",e),_("Failed to load professor information. Please try again.")}finally{v(!1)}},D=async e=>{try{N(!0);let s=await fetch(`${f.CT}/reviews/professor/${e}`);if(s.ok){let e=await s.json();g(e.reviews||[])}}catch(e){console.error("Failed to fetch reviews:",e)}finally{N(!1)}},E=async e=>{try{console.log("\uD83D\uDD0D Fetching similar professors for:",e);let s=await fetch(`${f.CT}/professors/similar/${e}`);if(console.log("\uD83D\uDCE1 Similar professors response status:",s.status),s.ok){let e=await s.json();console.log("✅ Similar professors data:",e),u(e.professors||[])}else console.warn(`⚠️ Similar professors endpoint returned ${s.status} - feature may not be deployed yet`),u([])}catch(e){console.error("❌ Failed to fetch similar professors:",e),u([])}},O=async e=>{try{let s=i?.college_id?`&college_id=${i.college_id}`:"",t=await fetch(`${f.CT}/professors/more-professors?exclude_id=${e}${s}&limit=6`);if(t.ok){let e=await t.json();y(e.professors||[])}else console.warn(`More professors endpoint returned ${t.status} - feature may not be deployed yet`),y([])}catch(e){console.error("Failed to fetch more professors:",e),y([])}},A=e=>e>=4?"bg-green-500 text-white":e>=3?"bg-yellow-500 text-white":"bg-red-500 text-white";return w?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading professor information..."})]})}):k||!i?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Professor Not Found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:k||"The professor you are looking for does not exist."}),(0,a.jsx)(d(),{href:"/",className:"text-indigo-600 hover:text-indigo-700",children:"← Back to Search"})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n(),{children:[(0,a.jsxs)("title",{children:[i.name," - RateMyProf India"]}),(0,a.jsx)("meta",{name:"description",content:`Rate and review ${i.name} from ${i.department}`})]}),$&&(0,a.jsx)("div",{className:`fixed top-4 right-4 z-50 px-6 py-3 rounded-lg shadow-lg transition-all duration-300 ${"success"===$.type?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"mr-2",children:"success"===$.type?"✅":"❌"}),$.message,(0,a.jsx)("button",{onClick:()=>P(null),className:"ml-3 text-white hover:text-gray-200",children:"✕"})]})}),(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,a.jsxs)(d(),{href:"/",className:"flex items-center text-gray-600 hover:text-gray-800 mb-4",children:[(0,a.jsx)(Y.Z,{className:"w-5 h-5 mr-2"}),"Back to Search"]})})}),(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,a.jsx)("div",{className:"flex items-start justify-between mb-6",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(B.Z,{className:"w-8 h-8 text-indigo-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-1",children:i.name}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(I.Z,{className:"w-4 h-4 mr-1"}),i.department]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(q.Z,{className:"w-4 h-4 mr-1"}),"Vishwakarma University"]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(W.Z,{className:"w-4 h-4 mr-1"}),i.total_reviews," reviews"]})]})]})]})}),(0,a.jsxs)("div",{className:"border-t border-gray-200 pt-6 mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Overall Rating"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:`inline-flex items-center px-4 py-2 rounded-full font-bold text-lg ${(i.average_rating||0)>=4?"bg-green-500 text-white":(i.average_rating||0)>=3?"bg-yellow-500 text-white":"bg-red-500 text-white"}`,children:["★ ",(i.average_rating||0).toFixed(1)]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Based on ",i.total_reviews," review",1!==i.total_reviews?"s":""]})]})]}),(0,a.jsx)("div",{className:"border-t border-gray-200 pt-6 mb-6",children:(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Compare & Explore"}),(0,a.jsx)("button",{onClick:()=>Z(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors text-sm font-medium",children:"Compare Professors"})]})})}),h.length>0&&(0,a.jsxs)("div",{className:"border-t border-gray-200 pt-6 mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Similar Professors"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:["Professors from the same department at ",i.department]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-3",children:h.map(e=>(0,a.jsx)(d(),{href:`/professors/${e.id}`,className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg hover:shadow-md transition-all border border-indigo-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h5",{className:"font-semibold text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.department}),e.subjects&&e.subjects.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:e.subjects.slice(0,3).map((e,s)=>(0,a.jsx)("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 rounded text-xs",children:e},s))})]}),(0,a.jsxs)("div",{className:"text-right ml-4",children:[(0,a.jsxs)("div",{className:`inline-flex items-center px-3 py-1 rounded-full font-bold text-sm ${A(e.average_rating)}`,children:["★ ",e.average_rating.toFixed(1)]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[e.total_reviews," reviews"]})]})]})},e.id))})]}),i.subjects&&i.subjects.length>0&&(0,a.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center",children:[(0,a.jsx)(p.Z,{className:"w-5 h-5 mr-2"}),"Subjects Taught"]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:i.subjects.map((e,s)=>(0,a.jsx)("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-800 rounded-full text-sm font-medium",children:e},s))})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Student Reviews (",x.length,")"]}),j?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading reviews..."})]}):x.length>0?(0,a.jsx)("div",{className:"space-y-6",children:x.map(e=>(0,a.jsxs)("div",{className:"border-b border-gray-200 pb-6 last:border-b-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:`inline-flex items-center px-3 py-1 rounded-full font-bold text-sm ${e.overall_rating>=4?"bg-green-500 text-white":e.overall_rating>=3?"bg-yellow-500 text-white":"bg-red-500 text-white"}`,children:["★ ",e.overall_rating.toFixed(1)]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[e.course_name&&(0,a.jsx)("span",{className:"font-medium",children:e.course_name}),e.semester&&(0,a.jsxs)("span",{children:[" • ",e.semester]})]})]}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:new Date(e.created_at).toLocaleDateString()})]}),(0,a.jsxs)("div",{className:"space-y-3 mb-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-gray-700 font-medium w-24",children:"Clarity:"}),(0,a.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:`h-full rounded-full transition-all ${e.clarity_rating>=4?"bg-green-500":e.clarity_rating>=3?"bg-yellow-500":"bg-red-500"}`,style:{width:`${e.clarity_rating/5*100}%`}})}),(0,a.jsx)("span",{className:`font-semibold w-8 ${e.clarity_rating>=4?"text-green-600":e.clarity_rating>=3?"text-yellow-600":"text-red-600"}`,children:e.clarity_rating.toFixed(1)})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-gray-700 font-medium w-24",children:"Helpfulness:"}),(0,a.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:`h-full rounded-full transition-all ${e.helpfulness_rating>=4?"bg-green-500":e.helpfulness_rating>=3?"bg-yellow-500":"bg-red-500"}`,style:{width:`${e.helpfulness_rating/5*100}%`}})}),(0,a.jsx)("span",{className:`font-semibold w-8 ${e.helpfulness_rating>=4?"text-green-600":e.helpfulness_rating>=3?"text-yellow-600":"text-red-600"}`,children:e.helpfulness_rating.toFixed(1)})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-gray-700 font-medium w-24",children:"Overall:"}),(0,a.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:`h-full rounded-full transition-all ${e.overall_rating>=4?"bg-green-500":e.overall_rating>=3?"bg-yellow-500":"bg-red-500"}`,style:{width:`${e.overall_rating/5*100}%`}})}),(0,a.jsx)("span",{className:`font-semibold w-8 ${e.overall_rating>=4?"text-green-600":e.overall_rating>=3?"text-yellow-600":"text-red-600"}`,children:e.overall_rating.toFixed(1)})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-gray-700 font-medium w-24",children:"Difficulty:"}),(0,a.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:`h-full rounded-full transition-all ${e.difficulty_rating<=2?"bg-green-500":e.difficulty_rating<=3?"bg-yellow-500":"bg-red-500"}`,style:{width:`${e.difficulty_rating/5*100}%`}})}),(0,a.jsx)("span",{className:`font-semibold w-8 ${e.difficulty_rating<=2?"text-green-600":e.difficulty_rating<=3?"text-yellow-600":"text-red-600"}`,children:e.difficulty_rating.toFixed(1)})]})]})]}),e.review_text&&(0,a.jsx)("div",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg mb-4",children:(0,a.jsxs)("p",{children:['"',e.review_text,'"']})}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100",children:[(0,a.jsx)(L,{reviewId:e.id,initialHelpfulCount:e.helpful_count||0,initialNotHelpfulCount:e.not_helpful_count||0,userVote:e.user_vote||null}),(0,a.jsx)(R,{reviewId:e.id,onFlagSubmitted:()=>{console.log("Review flagged successfully")}})]})]},e.id))}):(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(W.Z,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,a.jsx)("p",{children:"No reviews yet. Be the first to review this professor!"})]})]})]}),(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsx)("div",{className:"sticky top-8",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Rate This Professor"}),!t&&s?S?(0,a.jsx)(F,{professor:i,onCancel:()=>C(!1),onSubmit:()=>{C(!1),e&&"string"==typeof e&&(D(e),T(e)),P({message:"\uD83C\uDF89 Your review has been submitted successfully!",type:"success"}),setTimeout(()=>P(null),5e3)}}):(0,a.jsx)("button",{onClick:()=>C(!0),className:"w-full bg-indigo-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:"Write a Review"}):t?(0,a.jsx)("div",{className:"text-center py-4",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-indigo-600 mx-auto"})}):(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center mb-3",children:[(0,a.jsx)(G.Z,{className:"w-5 h-5 text-gray-400 mr-2"}),(0,a.jsx)("span",{className:"text-gray-600",children:"Sign in to review"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d(),{href:"/auth/login",className:"block w-full bg-indigo-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-indigo-700 text-center",children:"Sign In"}),(0,a.jsx)(d(),{href:"/auth/signup",className:"block w-full border border-indigo-600 text-indigo-600 py-2 px-4 rounded-lg font-medium hover:bg-indigo-50 text-center",children:"Create Account"})]})]})]})})})]}),b.length>0&&(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"More Professors You Might Like"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:b.map(e=>(0,a.jsxs)(d(),{href:`/professors/${e.id}`,className:"p-4 bg-gradient-to-br from-indigo-50 to-blue-50 rounded-lg hover:shadow-lg transition-all border border-indigo-100",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-bold text-gray-900 text-lg",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.department})]}),(0,a.jsxs)("div",{className:`inline-flex items-center px-3 py-1 rounded-full font-bold text-sm ${A(e.average_rating)}`,children:["★ ",e.average_rating.toFixed(1)]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("span",{className:"text-gray-500",children:[e.total_reviews," reviews"]}),(0,a.jsx)("span",{className:"text-indigo-600 font-medium",children:"View Profile →"})]}),e.subjects.length>0&&(0,a.jsxs)("div",{className:"mt-3 flex flex-wrap gap-1",children:[e.subjects.slice(0,2).map((e,s)=>(0,a.jsx)("span",{className:"px-2 py-1 bg-white text-xs text-gray-600 rounded-full border border-gray-200",children:e},s)),e.subjects.length>2&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-white text-xs text-gray-600 rounded-full border border-gray-200",children:["+",e.subjects.length-2," more"]})]})]},e.id))})]})})]}),z&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-auto",children:[(0,a.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Compare Professors"}),(0,a.jsx)("button",{onClick:()=>Z(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:"✕"})]}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)(V,{currentProfessorId:e,currentProfessorName:i?.name||"",onClose:()=>Z(!1)})})]})})]})]})}},2184:function(e,s,t){"use strict";t.d(s,{q:function(){return i}});var a=t(7066),r=t(5871);let l=a.Z.create({baseURL:r.CT,timeout:1e4,headers:{"Content-Type":"application/json"}});class i{static async searchProfessors(e={}){try{return(await l.get("/professors",{params:e})).data}catch(e){throw console.error("Error searching professors:",e),e}}static async getProfessor(e){try{return(await l.get(`/professors/${e}`)).data}catch(e){throw console.error("Error fetching professor:",e),e}}static async searchColleges(e={}){try{return(await l.get("/colleges",{params:e})).data}catch(e){throw console.error("Error searching colleges:",e),e}}static async getCollege(e){try{return(await l.get(`/colleges/${e}`)).data}catch(e){throw console.error("Error fetching college:",e),e}}}}},function(e){e.O(0,[664,914,164,888,774,179],function(){return e(e.s=9796)}),_N_E=e.O()}]);