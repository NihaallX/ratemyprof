(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{6896:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return t(9966)}])},2761:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(3759).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},185:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(3759).Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},2591:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(3759).Z)("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]])},6691:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(3759).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},7864:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(3759).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},8267:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(3759).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},9966:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return k}});var r=t(5893),a=t(7294),l=t(9008),n=t.n(l),i=t(1664),c=t.n(i),d=t(837),o=t(8844),x=t(1163),h=t(2761),m=t(8267),u=t(3759);let p=(0,u.Z)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);var g=t(6691),y=t(185),f=t(2591);let b=(0,u.Z)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),j=(0,u.Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);var N=t(9200),v=t(7864);function k(){let{user:e,session:s,loading:l}=(0,d.a)(),{showToast:i}=(0,o.l)(),u=(0,x.useRouter)(),[k,w]=(0,a.useState)({name:"",email:"",college:"",degree:"",linkedIn:"",portfolio:""}),[E,M]=(0,a.useState)(!1),[Z,C]=(0,a.useState)(!1),[I,T]=(0,a.useState)(!1),[_,P]=(0,a.useState)(""),[D,L]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(!l&&!e){u.push("/auth/login");return}e&&w({name:e.user_metadata?.name||"",email:e.email||"",college:e.user_metadata?.college||"",degree:e.user_metadata?.degree||"",linkedIn:e.user_metadata?.linkedIn||"",portfolio:e.user_metadata?.portfolio||""})},[e,l,u]);let S=async()=>{C(!0);try{await new Promise(e=>setTimeout(e,1e3)),M(!1),i("Profile updated successfully","success")}catch(e){console.error("Failed to save profile:",e),i("Failed to save profile. Please try again.","error")}finally{C(!1)}},z=(e,s)=>{w(t=>({...t,[e]:s}))},F=async()=>{if("DELETE"!==_){i("Please type DELETE to confirm","error");return}L(!0);try{if(!s?.access_token)throw Error("Authentication required");let e=await fetch("http://localhost:8000/v1/auth/delete-account",{method:"DELETE",headers:{Authorization:`Bearer ${s.access_token}`,"Content-Type":"application/json"}});if(!e.ok){let s="Failed to delete account";try{let t=await e.json();console.error("Delete account error response (JSON):",t),s=t.detail||s}catch(t){try{let t=await e.text();console.error("Delete account error response (TEXT):",t),s=t||s}catch(e){console.error("Could not parse error response at all")}}throw console.error("Response status:",e.status),Error(s)}i("Account deleted successfully. Goodbye!","success");let{createClient:r}=await Promise.resolve().then(t.bind(t,1608)),a=r("https://xgnewppqxqkyeabtmenf.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhnbmV3cHBxeHFreWVhYnRtZW5mIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc5NDEyOTQsImV4cCI6MjA3MzUxNzI5NH0.bQE3Pc4pdaRfv1YWeK-6q_osSc8eLnJuQh5nJDarDCk");await a.auth.signOut(),setTimeout(()=>u.push("/"),1e3)}catch(e){console.error("Failed to delete account:",e),i(e.message||"Failed to delete account. Please contact support at nihalpardeshi12344@gmail.com","error")}finally{L(!1)}};return l?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading..."})]})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n(),{children:[(0,r.jsx)("title",{children:"Profile - RateMyProf India"}),(0,r.jsx)("meta",{name:"description",content:"Manage your profile and account settings"})]}),(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex items-center space-x-4",children:(0,r.jsxs)(c(),{href:"/",className:"flex items-center text-gray-600 hover:text-gray-800",children:[(0,r.jsx)(h.Z,{className:"w-5 h-5 mr-2"}),"Back to Home"]})}),(0,r.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"My Profile"})]})})}),(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,r.jsx)("div",{className:"px-6 py-8 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center",children:(0,r.jsx)(m.Z,{className:"w-8 h-8 text-indigo-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:k.name||"Set up your profile"}),(0,r.jsx)("p",{className:"text-gray-600",children:k.email})]})]}),(0,r.jsxs)("button",{onClick:()=>M(!E),className:"flex items-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:[(0,r.jsx)(p,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:E?"Cancel":"Edit Profile"})]})]})}),(0,r.jsxs)("div",{className:"px-6 py-8",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,r.jsx)(m.Z,{className:"w-4 h-4 inline mr-2"}),"Full Name"]}),E?(0,r.jsx)("input",{type:"text",value:k.name,onChange:e=>z("name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Enter your full name"}):(0,r.jsx)("p",{className:"text-gray-900 py-2",children:k.name||"Not set"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,r.jsx)(g.Z,{className:"w-4 h-4 inline mr-2"}),"Email Address"]}),(0,r.jsxs)("p",{className:"text-gray-600 py-2 text-sm",children:[k.email,(0,r.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:"(verified)"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,r.jsx)(y.Z,{className:"w-4 h-4 inline mr-2"}),"College/University"]}),E?(0,r.jsx)("input",{type:"text",value:k.college,onChange:e=>z("college",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"e.g., Vishwakarma University"}):(0,r.jsx)("p",{className:"text-gray-900 py-2",children:k.college||"Not set"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,r.jsx)(f.Z,{className:"w-4 h-4 inline mr-2"}),"Degree/Program"]}),E?(0,r.jsx)("input",{type:"text",value:k.degree,onChange:e=>z("degree",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"e.g., B.Tech Computer Science"}):(0,r.jsx)("p",{className:"text-gray-900 py-2",children:k.degree||"Not set"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,r.jsx)(b,{className:"w-4 h-4 inline mr-2"}),"LinkedIn Profile"]}),E?(0,r.jsx)("input",{type:"url",value:k.linkedIn,onChange:e=>z("linkedIn",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"https://linkedin.com/in/username"}):(0,r.jsx)("div",{className:"py-2",children:k.linkedIn?(0,r.jsx)("a",{href:k.linkedIn,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:text-indigo-700",children:"View LinkedIn Profile →"}):(0,r.jsx)("p",{className:"text-gray-900",children:"Not set"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,r.jsx)(b,{className:"w-4 h-4 inline mr-2"}),"Portfolio/Website"]}),E?(0,r.jsx)("input",{type:"url",value:k.portfolio,onChange:e=>z("portfolio",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"https://yourwebsite.com"}):(0,r.jsx)("div",{className:"py-2",children:k.portfolio?(0,r.jsx)("a",{href:k.portfolio,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:text-indigo-700",children:"Visit Website →"}):(0,r.jsx)("p",{className:"text-gray-900",children:"Not set"})})]})]}),E&&(0,r.jsx)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,r.jsx)("button",{onClick:()=>M(!1),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,r.jsxs)("button",{onClick:S,disabled:Z,className:"flex items-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:[(0,r.jsx)(j,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:Z?"Saving...":"Save Changes"})]})]})})]})]}),(0,r.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow border-2 border-red-200",children:[(0,r.jsx)("div",{className:"px-6 py-4 bg-red-50 border-b border-red-200",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-red-800",children:[(0,r.jsx)(N.Z,{className:"w-5 h-5"}),(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Danger Zone"})]})}),(0,r.jsx)("div",{className:"px-6 py-6",children:I?(0,r.jsxs)("div",{className:"bg-red-50 p-6 rounded-lg border border-red-200",children:[(0,r.jsxs)("div",{className:"flex items-start space-x-3 mb-4",children:[(0,r.jsx)(N.Z,{className:"w-6 h-6 text-red-600 flex-shrink-0 mt-1"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-lg font-bold text-red-900 mb-2",children:"Are you absolutely sure?"}),(0,r.jsx)("p",{className:"text-red-800 mb-4",children:"This will permanently delete your account and all your data. This action cannot be undone."})]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-red-900 mb-2",children:["Type ",(0,r.jsx)("span",{className:"font-bold",children:"DELETE"})," to confirm:"]}),(0,r.jsx)("input",{type:"text",value:_,onChange:e=>P(e.target.value),className:"w-full px-3 py-2 border-2 border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Type DELETE",disabled:D})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)("button",{onClick:()=>{T(!1),P("")},disabled:D,className:"flex-1 px-4 py-2 bg-white text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:"Cancel"}),(0,r.jsxs)("button",{onClick:F,disabled:"DELETE"!==_||D,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,r.jsx)(v.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:D?"Deleting...":"Delete Forever"})]})]})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Delete Account"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Permanently delete your account and all associated data. This action cannot be undone."}),(0,r.jsxs)("ul",{className:"text-sm text-gray-600 mb-4 space-y-1 list-disc pl-5",children:[(0,r.jsx)("li",{children:"All your reviews will be permanently deleted"}),(0,r.jsx)("li",{children:"Your profile information will be removed"}),(0,r.jsx)("li",{children:"You will be immediately signed out"}),(0,r.jsx)("li",{children:"This action is irreversible"})]}),(0,r.jsxs)("button",{onClick:()=>T(!0),className:"flex items-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:[(0,r.jsx)(v.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:"Delete My Account"})]})]})})]})]})]})]})}},9008:function(e,s,t){e.exports=t(3867)}},function(e){e.O(0,[664,888,774,179],function(){return e(e.s=6896)}),_N_E=e.O()}]);