(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[449],{8669:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my-reviews",function(){return t(1044)}])},2761:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},3346:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},5452:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},2042:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]])},88:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},1044:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return j}});var a=t(5893),r=t(7294),i=t(9008),n=t.n(i),l=t(1664),c=t.n(l),d=t(837),x=t(8844),o=t(1163),m=t(88),h=t(2761),y=t(5452),u=t(2042);let f=(0,t(3759).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var g=t(3346),p=t(5871);function j(){let{user:e,session:s,loading:t}=(0,d.a)(),{showToast:i,showConfirm:l}=(0,x.l)(),j=(0,o.useRouter)(),[v,w]=(0,r.useState)([]),[N,b]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(!t&&!e){j.push("/auth/login");return}let a=async()=>{try{let e=await fetch(`${p.CT}/reviews/my-reviews`,{headers:{Authorization:`Bearer ${s?.access_token}`}});if(e.ok){let s=await e.json();w(s.reviews||[])}else console.error("Failed to fetch reviews"),w([])}catch(e){console.error("Error fetching reviews:",e),w([])}b(!1)};e&&s&&a()},[e,s,t,j]);let k=async e=>{l("Are you sure you want to delete this review? This action cannot be undone.",async()=>{try{let t=await fetch(`${p.CT}/reviews/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${s?.access_token}`}});if(t.ok)w(s=>s.filter(s=>s.id!==e)),i("Review deleted successfully","success");else{let e=await t.json();throw Error(e.detail||"Failed to delete review")}}catch(e){console.error("Failed to delete review:",e),i(e instanceof Error?e.message:"Failed to delete review. Please try again.","error")}},"Delete Review")},Z=e=>(0,a.jsxs)("div",{className:"flex items-center",children:[[1,2,3,4,5].map(s=>(0,a.jsx)(m.Z,{className:`w-4 h-4 ${s<=e?"text-yellow-400 fill-current":"text-gray-300"}`},s)),(0,a.jsxs)("span",{className:"ml-1 text-sm text-gray-600",children:["(",e,"/5)"]})]}),M=e=>(0,a.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${{pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"}[e]}`,children:e.charAt(0).toUpperCase()+e.slice(1)});return t||N?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading your reviews..."})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n(),{children:[(0,a.jsx)("title",{children:"My Reviews - RateMyProf India"}),(0,a.jsx)("meta",{name:"description",content:"View and manage your professor reviews"})]}),(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)(c(),{href:"/",className:"flex items-center text-gray-600 hover:text-gray-800",children:[(0,a.jsx)(h.Z,{className:"w-5 h-5 mr-2"}),"Back to Home"]})}),(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"My Reviews"})]})})}),(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:0===v.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(y.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No reviews yet"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"You haven't submitted any reviews yet. Start by rating your professors!"}),(0,a.jsx)(c(),{href:"/",className:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Find Professors to Review"})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["Your Reviews (",v.length,")"]})}),v.map(e=>(0,a.jsx)("div",{className:"bg-white rounded-lg shadow border border-gray-200",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.professorName}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.professorDepartment}),(0,a.jsxs)("p",{className:"text-sm text-indigo-600 font-medium",children:[e.courseName," â€¢ ",e.semester," ",e.academicYear]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[M(e.status),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{className:"p-1 text-gray-400 hover:text-indigo-600",title:"Edit Review",children:(0,a.jsx)(u.Z,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>k(e.id),className:"p-1 text-gray-400 hover:text-red-600",title:"Delete Review",children:(0,a.jsx)(f,{className:"w-4 h-4"})})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Overall"}),Z(e.overallRating)]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Difficulty"}),Z(e.difficultyRating)]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Clarity"}),Z(e.clarityRating)]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Helpfulness"}),Z(e.helpfulnessRating)]})]}),e.reviewText&&(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)("p",{className:"text-gray-800 leading-relaxed",children:['"',e.reviewText,'"']})}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600",children:[null!==e.attendanceMandatory&&(0,a.jsxs)("span",{children:["Attendance: ",e.attendanceMandatory?"Mandatory":"Optional"]}),e.assignmentLoad&&(0,a.jsxs)("span",{children:["Workload: ",e.assignmentLoad.charAt(0).toUpperCase()+e.assignmentLoad.slice(1)]}),(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(g.Z,{className:"w-3 h-3 mr-1"}),new Date(e.createdAt).toLocaleDateString()]})]})]})},e.id))]})})]})]})}},9008:function(e,s,t){e.exports=t(3867)},1163:function(e,s,t){e.exports=t(3079)}},function(e){e.O(0,[664,888,774,179],function(){return e(e.s=8669)}),_N_E=e.O()}]);